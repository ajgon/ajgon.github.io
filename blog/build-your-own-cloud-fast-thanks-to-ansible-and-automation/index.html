<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style nonce="9c737cda9c0353592e70a2213073d715bb26b45f" data-href="/styles.984ba98a3f7182cebdba.css" integrity="sha512-tArCtNMISXZKibEa+z5HcGO/B89vsvVbd+cepQbLGYG7ZouyFdTv0t38C7jGJjhZc4x1QhK30ejtIcDAs6Kamg==">@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:100;src:local("Roboto Thin "),local("Roboto-Thin"),url(/static/roboto-latin-100-987b84570ea69ee660455b8d5e91f5f1.woff2) format("woff2"),url(/static/roboto-latin-100-e9dbbe8a693dd275c16d32feb101f1c1.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:100;src:local("Roboto Thin italic"),local("Roboto-Thinitalic"),url(/static/roboto-latin-100italic-6232f43d15b0e7a0bf0fe82e295bdd06.woff2) format("woff2"),url(/static/roboto-latin-100italic-d704bb3d579b7d5e40880c75705c8a71.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:300;src:local("Roboto Light "),local("Roboto-Light"),url(/static/roboto-latin-300-55536c8e9e9a532651e3cf374f290ea3.woff2) format("woff2"),url(/static/roboto-latin-300-a1471d1d6431c893582a5f6a250db3f9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:300;src:local("Roboto Light italic"),local("Roboto-Lightitalic"),url(/static/roboto-latin-300italic-d69924b98acd849cdeba9fbff3f88ea6.woff2) format("woff2"),url(/static/roboto-latin-300italic-210a7c781f5a354a0e4985656ab456d9.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:local("Roboto Regular "),local("Roboto-Regular"),url(/static/roboto-latin-400-5d4aeb4e5f5ef754e307d7ffaef688bd.woff2) format("woff2"),url(/static/roboto-latin-400-bafb105baeb22d965c70fe52ba6b49d9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:400;src:local("Roboto Regular italic"),local("Roboto-Regularitalic"),url(/static/roboto-latin-400italic-d8bcbe724fd6f4ba44d0ee6a2675890f.woff2) format("woff2"),url(/static/roboto-latin-400italic-9680d5a0c32d2fd084e07bbc4c8b2923.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:500;src:local("Roboto Medium "),local("Roboto-Medium"),url(/static/roboto-latin-500-285467176f7fe6bb6a9c6873b3dad2cc.woff2) format("woff2"),url(/static/roboto-latin-500-de8b7431b74642e830af4d4f4b513ec9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:500;src:local("Roboto Medium italic"),local("Roboto-Mediumitalic"),url(/static/roboto-latin-500italic-510dec37fa69fba39593e01a469ee018.woff2) format("woff2"),url(/static/roboto-latin-500italic-ffcc050b2d92d4b14a4fcb527ee0bcc8.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:700;src:local("Roboto Bold "),local("Roboto-Bold"),url(/static/roboto-latin-700-037d830416495def72b7881024c14b7b.woff2) format("woff2"),url(/static/roboto-latin-700-cf6613d1adf490972c557a8e318e0868.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:700;src:local("Roboto Bold italic"),local("Roboto-Bolditalic"),url(/static/roboto-latin-700italic-010c1aeee3c6d1cbb1d5761d80353823.woff2) format("woff2"),url(/static/roboto-latin-700italic-846d1890aee87fde5d8ced8eba360c3a.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:900;src:local("Roboto Black "),local("Roboto-Black"),url(/static/roboto-latin-900-19b7a0adfdd4f808b53af7e2ce2ad4e5.woff2) format("woff2"),url(/static/roboto-latin-900-8c2ade503b34e31430d6c98aa29a52a3.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:900;src:local("Roboto Black italic"),local("Roboto-Blackitalic"),url(/static/roboto-latin-900italic-7b770d6c53423deb1a8e49d3c9175184.woff2) format("woff2"),url(/static/roboto-latin-900italic-bc833e725c137257c2c42a789845d82f.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.PageNotFoundLayout-module--page404html--laTCh{width:100%;height:100%;margin:0;padding:0}.PageNotFoundLayout-module--page404--3vtu0{width:100%;height:100%;margin:0;padding:0;font-family:Open Sans,Helvetica,Arial,sans-serif;color:#5a595a;background:bottom no-repeat #e9ecf7;background-image:url(/static/PageNotFoundLayout-dbca6b21e2eb3b4192d6fad4abe1c8c4.png);background-size:100% auto;position:relative}.PageNotFoundLayout-module--page404--3vtu0 a{text-decoration:none;cursor:pointer;color:#1472b9}.PageNotFoundLayout-module--page404--3vtu0 h1{font-weight:400}.PageNotFoundLayout-module--page404--3vtu0 .PageNotFoundLayout-module--info--2GcMt{position:absolute;right:10%;top:30%;text-align:center;text-shadow:1px 1px 4px #fff}</style><meta name="generator" content="Gatsby 2.13.23"/><style nonce="9c737cda9c0353592e70a2213073d715bb26b45f" type="text/css" id="server-side-jss">html{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,*::before,*::after{box-sizing:inherit}body{margin:0;background-color:#fafafa}@media print{body{background-color:#fff}}html{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,*::before,*::after{box-sizing:inherit}body{margin:0;background-color:#fafafa}@media print{body{background-color:#fff}}.jss109{background-color:#fff}.jss110{border-radius:4px}.jss111{box-shadow:none}.jss112{box-shadow:0 1px 3px 0 rgba(0,0,0,0.2),0 1px 1px 0 rgba(0,0,0,0.14),0 2px 1px -1px rgba(0,0,0,0.12)}.jss113{box-shadow:0 1px 5px 0 rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12)}.jss114{box-shadow:0 1px 8px 0 rgba(0,0,0,0.2),0 3px 4px 0 rgba(0,0,0,0.14),0 3px 3px -2px rgba(0,0,0,0.12)}.jss115{box-shadow:0 2px 4px -1px rgba(0,0,0,0.2),0 4px 5px 0 rgba(0,0,0,0.14),0 1px 10px 0 rgba(0,0,0,0.12)}.jss116{box-shadow:0 3px 5px -1px rgba(0,0,0,0.2),0 5px 8px 0 rgba(0,0,0,0.14),0 1px 14px 0 rgba(0,0,0,0.12)}.jss117{box-shadow:0 3px 5px -1px rgba(0,0,0,0.2),0 6px 10px 0 rgba(0,0,0,0.14),0 1px 18px 0 rgba(0,0,0,0.12)}.jss118{box-shadow:0 4px 5px -2px rgba(0,0,0,0.2),0 7px 10px 1px rgba(0,0,0,0.14),0 2px 16px 1px rgba(0,0,0,0.12)}.jss119{box-shadow:0 5px 5px -3px rgba(0,0,0,0.2),0 8px 10px 1px rgba(0,0,0,0.14),0 3px 14px 2px rgba(0,0,0,0.12)}.jss120{box-shadow:0 5px 6px -3px rgba(0,0,0,0.2),0 9px 12px 1px rgba(0,0,0,0.14),0 3px 16px 2px rgba(0,0,0,0.12)}.jss121{box-shadow:0 6px 6px -3px rgba(0,0,0,0.2),0 10px 14px 1px rgba(0,0,0,0.14),0 4px 18px 3px rgba(0,0,0,0.12)}.jss122{box-shadow:0 6px 7px -4px rgba(0,0,0,0.2),0 11px 15px 1px rgba(0,0,0,0.14),0 4px 20px 3px rgba(0,0,0,0.12)}.jss123{box-shadow:0 7px 8px -4px rgba(0,0,0,0.2),0 12px 17px 2px rgba(0,0,0,0.14),0 5px 22px 4px rgba(0,0,0,0.12)}.jss124{box-shadow:0 7px 8px -4px rgba(0,0,0,0.2),0 13px 19px 2px rgba(0,0,0,0.14),0 5px 24px 4px rgba(0,0,0,0.12)}.jss125{box-shadow:0 7px 9px -4px rgba(0,0,0,0.2),0 14px 21px 2px rgba(0,0,0,0.14),0 5px 26px 4px rgba(0,0,0,0.12)}.jss126{box-shadow:0 8px 9px -5px rgba(0,0,0,0.2),0 15px 22px 2px rgba(0,0,0,0.14),0 6px 28px 5px rgba(0,0,0,0.12)}.jss127{box-shadow:0 8px 10px -5px rgba(0,0,0,0.2),0 16px 24px 2px rgba(0,0,0,0.14),0 6px 30px 5px rgba(0,0,0,0.12)}.jss128{box-shadow:0 8px 11px -5px rgba(0,0,0,0.2),0 17px 26px 2px rgba(0,0,0,0.14),0 6px 32px 5px rgba(0,0,0,0.12)}.jss129{box-shadow:0 9px 11px -5px rgba(0,0,0,0.2),0 18px 28px 2px rgba(0,0,0,0.14),0 7px 34px 6px rgba(0,0,0,0.12)}.jss130{box-shadow:0 9px 12px -6px rgba(0,0,0,0.2),0 19px 29px 2px rgba(0,0,0,0.14),0 7px 36px 6px rgba(0,0,0,0.12)}.jss131{box-shadow:0 10px 13px -6px rgba(0,0,0,0.2),0 20px 31px 3px rgba(0,0,0,0.14),0 8px 38px 7px rgba(0,0,0,0.12)}.jss132{box-shadow:0 10px 13px -6px rgba(0,0,0,0.2),0 21px 33px 3px rgba(0,0,0,0.14),0 8px 40px 7px rgba(0,0,0,0.12)}.jss133{box-shadow:0 10px 14px -6px rgba(0,0,0,0.2),0 22px 35px 3px rgba(0,0,0,0.14),0 8px 42px 7px rgba(0,0,0,0.12)}.jss134{box-shadow:0 11px 14px -7px rgba(0,0,0,0.2),0 23px 36px 3px rgba(0,0,0,0.14),0 9px 44px 8px rgba(0,0,0,0.12)}.jss135{box-shadow:0 11px 15px -7px rgba(0,0,0,0.2),0 24px 38px 3px rgba(0,0,0,0.14),0 9px 46px 8px rgba(0,0,0,0.12)}.jss108{overflow:hidden}.jss206{padding:16px}.jss206:last-child{padding-bottom:24px}.jss145{margin:0;display:block}.jss146{color:rgba(0,0,0,0.54);font-size:7rem;font-weight:300;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.14286em;margin-left:-.04em;letter-spacing:-.04em}.jss147{color:rgba(0,0,0,0.54);font-size:3.5rem;font-weight:400;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.30357em;margin-left:-.02em;letter-spacing:-.02em}.jss148{color:rgba(0,0,0,0.54);font-size:2.8125rem;font-weight:400;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.13333em;margin-left:-.02em}.jss149{color:rgba(0,0,0,0.54);font-size:2.125rem;font-weight:400;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.20588em}.jss150{color:rgba(0,0,0,0.87);font-size:1.5rem;font-weight:400;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.35417em}.jss151{color:rgba(0,0,0,0.87);font-size:1.3125rem;font-weight:500;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.16667em}.jss152{color:rgba(0,0,0,0.87);font-size:1rem;font-weight:400;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.5em}.jss153{color:rgba(0,0,0,0.87);font-size:.875rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.5;letter-spacing:.01071em}.jss154{color:rgba(0,0,0,0.87);font-size:1rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.5;letter-spacing:.00938em}.jss155{color:rgba(0,0,0,0.87);font-size:.75rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.66;letter-spacing:.03333em}.jss156{color:rgba(0,0,0,0.87);font-size:.875rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;line-height:1.75;letter-spacing:.02857em;text-transform:uppercase}.jss157{color:#333;font-size:6rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:300;line-height:1;letter-spacing:-0.01562em}.jss158{color:#333;font-size:3.75rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:300;line-height:1;letter-spacing:-0.00833em}.jss159{color:#333;font-size:3rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.04;letter-spacing:0}.jss160{color:#333;font-size:2.125rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.17;letter-spacing:.00735em}.jss161{color:#333;font-size:1.5rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.33;letter-spacing:0}.jss162{color:#333;font-size:1.25rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;line-height:1.6;letter-spacing:.0075em}.jss163{color:#333;font-size:1rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.75;letter-spacing:.00938em}.jss164{color:rgba(0,0,0,0.87);font-size:.875rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;line-height:1.57;letter-spacing:.00714em}.jss165{color:rgba(0,0,0,0.87);font-size:.75rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:2.66;letter-spacing:.08333em;text-transform:uppercase}.jss166{width:1px;height:1px;position:absolute;overflow:hidden}.jss167{text-align:left}.jss168{text-align:center}.jss169{text-align:right}.jss170{text-align:justify}.jss171{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.jss172{margin-bottom:.35em}.jss173{margin-bottom:16px}.jss174{color:inherit}.jss175{color:#fafafa}.jss176{color:#f50057}.jss177{color:rgba(0,0,0,0.87)}.jss178{color:rgba(0,0,0,0.54)}.jss179{color:#f44336}.jss180{display:inline}.jss139{display:flex;padding:16px;align-items:center}.jss140{flex:0 0 auto;margin-right:16px}.jss141{flex:0 0 auto;align-self:flex-start;margin-top:-8px;margin-right:-8px}.jss142{flex:1 1 auto}.jss204{display:block;background-size:cover;background-repeat:no-repeat;background-position:center}.jss205{width:100%}.jss188{color:inherit;cursor:pointer;margin:0;border:0;display:inline-flex;padding:0;outline:0;position:relative;user-select:none;align-items:center;border-radius:0;vertical-align:middle;justify-content:center;-moz-appearance:none;text-decoration:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.jss188::-moz-focus-inner{border-style:none}.jss188.jss189{cursor:default;pointer-events:none}.jss182{flex:0 0 auto;color:rgba(0,0,0,0.54);padding:12px;overflow:visible;font-size:1.5rem;text-align:center;transition:background-color 150ms cubic-bezier(0.4,0,0.2,1) 0ms;border-radius:50%}.jss182:hover{background-color:rgba(0,0,0,0.08)}.jss182.jss186{color:rgba(0,0,0,0.26)}@media(hover:none){.jss182:hover{background-color:transparent}}.jss182:hover.jss186{background-color:transparent}.jss183{color:inherit}.jss184{color:#fafafa}.jss184:hover{background-color:rgba(250,250,250,0.08)}@media(hover:none){.jss184:hover{background-color:transparent}}.jss185{color:#f50057}.jss185:hover{background-color:rgba(245,0,87,0.08)}@media(hover:none){.jss185:hover{background-color:transparent}}.jss187{width:100%;display:flex;align-items:inherit;justify-content:inherit}.jss202{top:0;left:0;right:0;bottom:0;z-index:1300;position:fixed}.jss203{visibility:hidden}.jss201{outline:0;position:absolute;min-width:16px;max-width:calc(100% - 32px);overflow-y:auto;overflow-x:hidden;min-height:16px;max-height:calc(100% - 32px)}.jss200{max-height:calc(100% - 96px);-webkit-overflow-scrolling:touch}.jss191{fill:currentColor;width:1em;height:1em;display:inline-block;font-size:24px;transition:fill 200ms cubic-bezier(0.4,0,0.2,1) 0ms;user-select:none;flex-shrink:0}.jss192{color:#fafafa}.jss193{color:#f50057}.jss194{color:rgba(0,0,0,0.54)}.jss195{color:#f44336}.jss196{color:rgba(0,0,0,0.26)}.jss197{font-size:inherit}.jss198{font-size:20px}.jss199{font-size:35px}.jss181{color:inherit;text-decoration:none}.jss136{max-height:200px}.jss137{max-height:450px}.jss138{font-size:3.5rem;font-weight:500}.jss106{box-shadow:none;margin-bottom:2.5em}@media(max-width:959.95px){.jss106{margin-bottom:0}}.jss107 p,.jss107 li{font-size:1.125rem;line-height:1.46429em}.jss7{width:100%;display:flex;flex-wrap:wrap;box-sizing:border-box}.jss8{margin:0;box-sizing:border-box}.jss9{min-width:0}.jss10{flex-direction:column}.jss11{flex-direction:column-reverse}.jss12{flex-direction:row-reverse}.jss13{flex-wrap:nowrap}.jss14{flex-wrap:wrap-reverse}.jss15{align-items:center}.jss16{align-items:flex-start}.jss17{align-items:flex-end}.jss18{align-items:baseline}.jss19{align-content:center}.jss20{align-content:flex-start}.jss21{align-content:flex-end}.jss22{align-content:space-between}.jss23{align-content:space-around}.jss24{justify-content:center}.jss25{justify-content:flex-end}.jss26{justify-content:space-between}.jss27{justify-content:space-around}.jss28{justify-content:space-evenly}.jss29{width:calc(100% + 8px);margin:-4px}.jss29>.jss8{padding:4px}.jss30{width:calc(100% + 16px);margin:-8px}.jss30>.jss8{padding:8px}.jss31{width:calc(100% + 24px);margin:-12px}.jss31>.jss8{padding:12px}.jss32{width:calc(100% + 32px);margin:-16px}.jss32>.jss8{padding:16px}.jss33{width:calc(100% + 40px);margin:-20px}.jss33>.jss8{padding:20px}.jss34{flex-grow:0;max-width:none;flex-basis:auto}.jss35{flex-grow:1;max-width:100%;flex-basis:0}.jss36{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.jss37{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.jss38{flex-grow:0;max-width:25%;flex-basis:25%}.jss39{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.jss40{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.jss41{flex-grow:0;max-width:50%;flex-basis:50%}.jss42{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.jss43{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.jss44{flex-grow:0;max-width:75%;flex-basis:75%}.jss45{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.jss46{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.jss47{flex-grow:0;max-width:100%;flex-basis:100%}@media(min-width:600px){.jss48{flex-grow:0;max-width:none;flex-basis:auto}.jss49{flex-grow:1;max-width:100%;flex-basis:0}.jss50{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.jss51{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.jss52{flex-grow:0;max-width:25%;flex-basis:25%}.jss53{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.jss54{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.jss55{flex-grow:0;max-width:50%;flex-basis:50%}.jss56{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.jss57{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.jss58{flex-grow:0;max-width:75%;flex-basis:75%}.jss59{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.jss60{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.jss61{flex-grow:0;max-width:100%;flex-basis:100%}}@media(min-width:960px){.jss62{flex-grow:0;max-width:none;flex-basis:auto}.jss63{flex-grow:1;max-width:100%;flex-basis:0}.jss64{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.jss65{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.jss66{flex-grow:0;max-width:25%;flex-basis:25%}.jss67{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.jss68{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.jss69{flex-grow:0;max-width:50%;flex-basis:50%}.jss70{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.jss71{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.jss72{flex-grow:0;max-width:75%;flex-basis:75%}.jss73{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.jss74{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.jss75{flex-grow:0;max-width:100%;flex-basis:100%}}@media(min-width:1280px){.jss76{flex-grow:0;max-width:none;flex-basis:auto}.jss77{flex-grow:1;max-width:100%;flex-basis:0}.jss78{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.jss79{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.jss80{flex-grow:0;max-width:25%;flex-basis:25%}.jss81{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.jss82{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.jss83{flex-grow:0;max-width:50%;flex-basis:50%}.jss84{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.jss85{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.jss86{flex-grow:0;max-width:75%;flex-basis:75%}.jss87{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.jss88{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.jss89{flex-grow:0;max-width:100%;flex-basis:100%}}@media(min-width:1920px){.jss90{flex-grow:0;max-width:none;flex-basis:auto}.jss91{flex-grow:1;max-width:100%;flex-basis:0}.jss92{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.jss93{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.jss94{flex-grow:0;max-width:25%;flex-basis:25%}.jss95{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.jss96{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.jss97{flex-grow:0;max-width:50%;flex-basis:50%}.jss98{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.jss99{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.jss100{flex-grow:0;max-width:75%;flex-basis:75%}.jss101{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.jss102{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.jss103{flex-grow:0;max-width:100%;flex-basis:100%}}.jss4{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right)}.jss4 a{color:#b3003d;text-decoration:none}.jss5{display:flex;margin-top:2.5rem;justify-content:center}.jss6{overflow:hidden;max-width:1000px}.jss2{top:0;left:0;width:100%;height:100%;z-index:-1;overflow:hidden;position:absolute;pointer-events:none;background-color:#fff}@media(max-width:599.95px){.jss2{top:-40vh}}.jss3{top:0;left:50%;width:100%;height:3000px;z-index:1;position:absolute;min-width:1920px;transform:translate3d(-50%,0,0);will-change:transform;pointer-events:none;background-color:#fff}.jss207{background:#ffc400;text-align:center}@media(max-width:599.95px){.jss207{margin-top:3rem}}@media(max-width:1279.95px){.jss207{padding:7.5rem 5px;margin-top:15rem}}@media(min-width:960px){.jss207{margin:40vh 0 0;height:60vh;display:flex;min-height:250px;align-items:center;justify-content:center}}.jss208{font-weight:bold;margin-bottom:20px}.jss208 a{color:#333}.jss208 a:hover{text-decoration:underline}@media(max-width:599.95px){.jss104{margin-top:5rem}}@media(min-width:600px){.jss104{margin-top:15rem}}@media(min-width:960px){.jss104{height:100vh;margin:0;padding:0 5px;display:flex;min-height:600px;flex-direction:column;justify-content:center}}@media(max-width:959.95px){.jss104{padding:5rem 5px 0}}.jss105{font-weight:bold;margin-bottom:20px}.jss1{height:auto;display:block;margin-top:0}@media(min-width:960px){.jss1{padding:5rem 0 0}}@media(max-width:959.95px){.jss1{padding:0}}</style><title data-react-helmet="true">Build Your Own Cloud Fast, Thanks to Ansible and Automation | Igor Rzegocki personal webpage and blog</title><link data-react-helmet="true" rel="shortcut icon" type="image/png" href="/static/favicon-9bbd101a3039c60b0eff2f552a2db6bf.png"/><link data-react-helmet="true" rel="canonical" href="https:/www.rzegocki.pl/blog/build-your-own-cloud-fast-thanks-to-ansible-and-automation/"/><meta data-react-helmet="true" name="msapplication-config" content="/static/browserconfig-09e19ac7a78d68293c22953898762a5f.xml"/><meta data-react-helmet="true" name="description" content="Last year I wrote an article about installing custom linux distro on Raspberry Pi 2.
Since then I configured it as my personal cloud, with…"/><meta data-react-helmet="true" name="image" content="https://www.rzegocki.pl/static/e2c1afa375eac19e00705b12667cd199/e9c7b/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png"/><meta data-react-helmet="true" property="og:url" content="https:/www.rzegocki.pl/blog/build-your-own-cloud-fast-thanks-to-ansible-and-automation/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Build Your Own Cloud Fast, Thanks to Ansible and Automation"/><meta data-react-helmet="true" property="og:description" content="Last year I wrote an article about installing custom linux distro on Raspberry Pi 2.
Since then I configured it as my personal cloud, with…"/><meta data-react-helmet="true" property="og:image" content="https://www.rzegocki.pl/static/e2c1afa375eac19e00705b12667cd199/e9c7b/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="ajgon"/><meta data-react-helmet="true" name="twitter:title" content="Build Your Own Cloud Fast, Thanks to Ansible and Automation"/><meta data-react-helmet="true" name="twitter:description" content="Last year I wrote an article about installing custom linux distro on Raspberry Pi 2.
Since then I configured it as my personal cloud, with…"/><meta data-react-helmet="true" name="twitter:image" content="https://www.rzegocki.pl/static/e2c1afa375eac19e00705b12667cd199/e9c7b/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png"/><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https:/www.rzegocki.pl/","name":"Build Your Own Cloud Fast, Thanks to Ansible and Automation","alternateName":"Igor Rzegocki personal webpage and blog"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:/www.rzegocki.pl/","name":"Blog","image":"https://www.rzegocki.pl/static/e2c1afa375eac19e00705b12667cd199/e9c7b/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png"}},{"@type":"ListItem","position":2,"item":{"@id":"https:/www.rzegocki.pl/blog/build-your-own-cloud-fast-thanks-to-ansible-and-automation/","name":"Build Your Own Cloud Fast, Thanks to Ansible and Automation","image":"https://www.rzegocki.pl/static/e2c1afa375eac19e00705b12667cd199/e9c7b/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https:/www.rzegocki.pl/","name":"Build Your Own Cloud Fast, Thanks to Ansible and Automation","alternateName":"Igor Rzegocki personal webpage and blog","headline":"Build Your Own Cloud Fast, Thanks to Ansible and Automation","image":{"@type":"ImageObject","url":"https://www.rzegocki.pl/static/e2c1afa375eac19e00705b12667cd199/e9c7b/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:/www.rzegocki.pl/"},"publisher":{"@type":"Organization","name":"Igor Rzegocki","logo":{"@type":"ImageObject","url":"https://www.rzegocki.pl//icons/icon-512x512.png"}},"datePublished":"May 22, 2016","dateModified":"May 22, 2016","author":"Igor Rzegocki","description":"Last year I wrote an article about installing custom linux distro on Raspberry Pi 2.\nSince then I configured it as my personal cloud, with…"}]</script><style nonce="9c737cda9c0353592e70a2213073d715bb26b45f" data-react-helmet="true" type="text/css">body, #___gatsby { position: relative; font-family: Roboto, sans-serif }</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><style nonce="9c737cda9c0353592e70a2213073d715bb26b45f" type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link rel="shortcut icon" href="/icons/icon-48x48.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#a2cf6e"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="70x70" href="/icons/icon-70x70.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="150x150" href="/icons/icon-150x150.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="310x150" href="/icons/icon-310x150.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="310x310" href="/icons/icon-310x310.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=97770e10ac04ff01849e4c50ace6feed"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-7ee7ec14e054a21de387.js"/><link as="script" rel="preload" href="/app-5b11c92d460ffea1a563.js"/><link as="script" rel="preload" href="/styles-673077b702f15e1f3b87.js"/><link as="script" rel="preload" href="/3-b46058bb17556d147fd2.js"/><link as="script" rel="preload" href="/2-2988e124b4c94e635f1f.js"/><link as="script" rel="preload" href="/0-e2a5c9c175a41c0dceee.js"/><link as="script" rel="preload" href="/webpack-runtime-9c15ed4c69f26eab6acc.js"/><link as="fetch" rel="preload" href="/page-data/blog/build-your-own-cloud-fast-thanks-to-ansible-and-automation/page-data.json" crossorigin="use-credentials"/></head><body id="about"><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="jss2"><svg class="jss3" alt="" role="presentation" viewBox="0 0 1920 3000"><path transform="translate(-391.661,1890.007)rotate(-106)scale(1.2)" id="heart-path-3" d="M929.557 11C666.76 11 412.049 272.269 293.37 386.75 168.855 506.864-46 566.84-46 857.333c0 364.706 251.46 920.194 535.82 791.281 194.676-88.254 282.567-153.665 389.972-423.354 83.087-208.625 323.07-296.851 323.07-645.67C1202.862 214.883 1294.034 11 929.557 11z" fill="rgb(255,255,255)" stroke="#dcdcdc"></path><path transform="translate(-369.986,1734.425)rotate(-106)scale(1.2)" id="heart-path-2" d="M819.183 84C603.326 84 394.11 298.645 296.628 392.697 194.353 491.375 17.873 540.649 17.873 779.3c0 299.624 206.546 755.983 440.117 650.075 159.903-72.505 232.096-126.243 320.318-347.805 68.246-171.396 265.365-243.877 265.365-530.448C1043.673 251.499 1118.56 84 819.183 84z" fill="rgb(255,255,255)" stroke="#dcdcdc"></path><path transform="translate(-359.59,1586.12)rotate(-106)scale(1.2)" id="heart-path-1" d="M709.498 158c-171.062 0-336.86 170.013-414.112 244.508-81.05 78.16-220.906 117.187-220.906 306.215 0 237.322 163.682 598.787 348.781 514.902 126.72-57.429 183.931-99.993 253.844-275.484 54.084-135.757 210.296-193.167 210.296-420.15C887.4 290.672 946.747 158 709.498 158z" fill="#bfb9dd"></path></svg></div><div class="jss7 jss24 jss4" role="main"><div class="jss8 jss47 jss72 jss5"><div class="jss6"><section class="jss104 jss1"><div class="jss109 jss112 jss110 jss108 jss106"><div class="jss139"><div class="jss142"><h1 class="jss145 jss161 jss138">Build Your Own Cloud Fast, Thanks to Ansible and Automation</h1><span class="jss145 jss154 jss178 jss144">May 22, 2016</span></div><div class="jss141"><nav aria-labelledby="share-button-undefined"><button class="jss188 jss182" tabindex="0" type="button" aria-label="Share" id="share-button-undefined" aria-haspopup="true"><span class="jss187"><svg class="jss191" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0z"></path><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"></path></svg></span></button></nav></div></div><div class="jss204 jss137 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:75%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACY0lEQVQoz51TW0/UQBjdPwe+6au/wsT4qvHNqDHGF+MtEJREgYCrVMXFhe2FbjvbTmem7fY+nd63rLLwIE+8WBYBL/hicjKZmeSc833fnGnhrPhvtP44oymO92mOigoVo98uLybnVbOSrHCKYzQblJeWH9iej4uKpBlOM3QxmaVmSK28BCxfdYp3bmGkBSkr0h+AbQGmWS8eb9HdQfJT9JyMRrs2AObD+zBJ3gbVle7u1c180/LsqiLQErdF3o6ORmty7nHBZOAMSZzirDx3JkkG+oquwTAM3gj6ox7qGtjIih1RWm+3JSdwPaAHnkQrIMsG19YbSppPndOcVLXS1550wFMlobYLhd6AJvW3vZmZmdlLs+PJRPYop1ucQUw/VAkR3ACXo2airUbDrPeYytX63TvaeBkwLPH9kI729h8/n3+2sHhweIhYFWVQh68/IXfAGNAhHjqkHLWaOeEkNQyUEfw9YzaEy7IuDV3JdzVGkI9FL7TKYiU+eKDlkmGolBGeV7pdWFTHPetxorB0248+G0TE0o6DRUevuduThRu6+x6Ysm25qqJyGpYdj0cExImWZA2r1ZSOq9oeOvbGR8Gjvice7dO+0Vltz8+9uPeVXOvwH8Y3bx1ev7wjrMvLa8Ak6Gxg04SUhDIVADViJCLQ5GWsSe7malom7lxP7YhLK1sv5zcUwIOBaNpoyvw1YSUua5Q0MSrVkMpB4pAlrL2CxpKAQK/pCJvN+8l+CCIKWfpXtk/1zLxstDVW9oj1BSJx6AEv0GmsNMwwgkn6z49xBjItR6OxHrPG6qRU49TgBD8AeOHjk0eAmwkAAAAASUVORK5CYII=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/e2c1afa375eac19e00705b12667cd199/69781/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png 250w,
/static/e2c1afa375eac19e00705b12667cd199/3fa08/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png 500w,
/static/e2c1afa375eac19e00705b12667cd199/e9c7b/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png 1000w,
/static/e2c1afa375eac19e00705b12667cd199/572fb/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png 1024w" sizes="(max-width: 1000px) 100vw, 1000px" /><img loading="lazy" sizes="(max-width: 1000px) 100vw, 1000px" srcset="/static/e2c1afa375eac19e00705b12667cd199/69781/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png 250w,
/static/e2c1afa375eac19e00705b12667cd199/3fa08/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png 500w,
/static/e2c1afa375eac19e00705b12667cd199/e9c7b/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png 1000w,
/static/e2c1afa375eac19e00705b12667cd199/572fb/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png 1024w" src="/static/e2c1afa375eac19e00705b12667cd199/e9c7b/build-your-own-cloud-fast-thanks-to-ansible-and-automation.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="jss206"><div class="jss107"><p>Last year I wrote an <a href="/blog/installing-custom-linux-on-raspberry-pi-2">article about installing custom linux distro on Raspberry Pi 2</a>.
Since then I configured it as my personal cloud, with <a href="https://bit.ly/2LGNWiS">email daemon</a>,
<a href="https://owncloud.org/">dropbox alternative</a>, <a href="https://roundcube.net/">webmail</a>,
<a href="https://bit.ly/2qrPX8W">backup system</a> and some other tools. However it appeared, that
configuration like that is a real SDCard killer (tons of small files), and in a past year
I had to replace it twice, each time redoing the whole configure &#x26; install again.</p>
<p>This was always a real time consuming <a href="https://www.netlingo.com/word/pita.php">PITA</a>, so
I decided to automate the whole process, thus the <a href="https://github.com/ajgon/self-hosted-mailserver">self-hosted-mailserver</a>
project was born.</p>
<p>I wrote it with "Keep it simple and secure" principle in mind. As it will be
used exclusively by the owner, I assumed he would use most recent versions of
software and dropped all legacy protocols (like SSL, TLS &#x3C; 1.2 etc.).</p>
<h2>Preparation</h2>
<p>First of all, you need ansible.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">brew <span class="token function">install</span> ansible</code></pre></div>
<p>Also if you haven't done it already, add your public SSH key file to authorized keys
of the root user on your Raspberry (or any other server) and set <code class="language-text">PermitRootLogin</code>
to <code class="language-text">true</code> (don't worry though, those scripts will take care of this security risk later on
and disable it).</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">export</span> MACHINE_IP<span class="token operator">=</span><span class="token operator">&lt;</span>machine IP<span class="token operator">></span>
<span class="token function">ssh</span> root@<span class="token variable">${MACHINE_IP}</span> <span class="token string">'mkdir /root/.ssh &amp;&amp; chmod 700 /root/.ssh &amp;&amp; touch /root/.ssh/authorized_keys &amp;&amp; chmod 600 /root/.ssh/authorized_keys'</span>
<span class="token function">scp</span> ~/.ssh/id_rsa.pub root@<span class="token variable">${MACHINE_IP}</span>:/root/.ssh/authorized_keys</code></pre></div>
<h3>Setting up GPG</h3>
<p>If you want to use external backups, you need to install GPG on the server
(this bases on assumption, to NEVER store any private data remotely without encrypting
them first). Also, you need a GPG key (you can skip next step if you have one already).</p>
<h4>Creating a GPG key</h4>
<p>Refer to <a href="https://www.gnupg.org/documentation/">GPG documentation</a> for more examples,
but in general all you have to do is invoke <code class="language-text">gpg --gen-key</code> and answer its questions. Choose RSA,
4096 bits size, and never expiring key. Then export it and store it somewhere safe.
You will need it in a minute. Also take a note o the Key-Id property.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">brew <span class="token function">install</span> gpg
gpg --gen-key
gpg --export -a -r email@used.to.create.key.com <span class="token operator">></span> raspberry.public
gpg --export-secret-key -a -r email@used.to.create.key.com <span class="token operator">></span> raspberry.private
gpg --list-keys <span class="token operator">|</span> <span class="token function">grep</span> -B1 <span class="token string">'ajgon@irgon.com'</span> <span class="token operator">|</span> <span class="token function">grep</span> pub <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/.*\/\(.*\)\ .*/\1/'</span>
<span class="token comment"># *The last command returns your Key-Id, note it somewhere as well.</span></code></pre></div>
<h2>Configuration</h2>
<p>To make those scripts work, you need to set some of user-based variables (like passwords, emails etc.).
Those variables are stored in <code class="language-text">roles/*/vars/main.yml</code> files.</p>
<h3>roles/base/vars/main.yml</h3>
<p>This one is pretty straightforward. The cloud uses MySQL as a database of choice, for email configuration,
web applications etc. Here you need to set up a mysql <code class="language-text">root</code> user password. If you don't plan to ever use it
just type:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token keyword">echo</span> <span class="token string">"mysql_root_password: \"<span class="token variable"><span class="token variable">$(</span>pwgen 30 1<span class="token variable">)</span></span>\""</span> <span class="token operator">></span> roles/base/vars/main.yml</code></pre></div>
<h3>roles/duplicity/vars/main.yml</h3>
<p><a href="https://duplicity.nongnu.org/">Duplicity</a> is a tool for automated backups.
It is known that all people can be divided into two groups: those who have never lost important data
and those who regularly perform data backups. This task, encrypts all the important
data (emails, owncloud files etc.) and stores them on WebDav-based remote (personally
I use <a href="https://box.com">box.com</a>).</p>
<p>Here (besides the WebDav host, username and password) you need to put the GPG Key-Id which you
noted earlier, under the <code class="language-text">encrypt_key</code> property.</p>
<p>Also, there is a VERY important parameter called <code class="language-text">cache_directory</code>. For Raspberry it is crucial
to set it to somewhere outside of the microSD card - otherwise you will kill it pretty quick
(as I did... twice, before noticing this out).</p>
<p>If you don't want to set up the duplicity (or plan to do it later manually), just remove
this task from <code class="language-text">main.yml</code> file which lives in root directory of the project.</p>
<h3>roles/maildb/vars/main.yml</h3>
<p>First important service of our cloud - the mailserver. Since many things needs to be configured,
this file is most complicated. So let's go through it line by line.</p>
<ul>
<li><code class="language-text">postmaster_email</code> - Basically a local email which will receive all the mailer-daemon failure
messages. Don't use some bizzare e-mail you never check here, since those messages are pretty
important (your email may never reach the recipient, and you will never notice it if you don't
check those warnings)</li>
<li><code class="language-text">username</code>, <code class="language-text">password</code> and <code class="language-text">database</code> - Since whole accounts setup is stored in RDBMS, you need
to put its credentials here. Don't use the root! You would probably never use this account,
so it is save, to put some auto-generated random characters password here.</li>
<li>
<p><code class="language-text">domains</code> - An array of domains you wish to serve in your server. Each item is a hash, consiting
following keys:</p>
<ul>
<li><code class="language-text">name</code> - the name of the domain (without user), i.e. for <code class="language-text">user@example.com</code> it will be <code class="language-text">example.com</code>.</li>
<li><code class="language-text">primary</code> - <code class="language-text">yes</code> or <code class="language-text">no</code>. A primary domain (in those scripts context) is a domain you wish to receive
<a href="https://z-push.org/">Z-Push</a> notifications from. If you configure only one domain (most common case),
set it to true.</li>
<li><code class="language-text">users</code> - an array of email/password hashes which will become user accounts. Configure "real" accounts
here only. There is a separate section for aliases.</li>
<li><code class="language-text">email</code> - user email - it's domain must match the domain name configured for this group, i.e.
for given example, <code class="language-text">user@example.com</code> is valid, while <code class="language-text">user@example2.com</code> is not. If you wish
to have different domains, configure separate <code class="language-text">domains</code> groups for them.</li>
<li><code class="language-text">password</code> - a password for user email.</li>
<li><code class="language-text">aliases</code> - here you can configure aliases of the emails.</li>
<li><code class="language-text">from</code> - the name of the alias (full email). It must match the <code class="language-text">domains</code> name (like user email).</li>
<li><code class="language-text">to</code> - destination email. This one can be any valid email (doesn't have to match the domain criteria)</li>
</ul>
</li>
</ul>
<h3>roles/owncloud/vars/main.yml<code class="language-text">and</code>roles/roundcube/vars/main.yml</h3>
<p>Configuration for both roundcube and owncloud is pretty straightforwrd. Remember, to use separate RDBMS
credentials for each one, and use non-admin user with ownCloud.</p>
<h3>roles/postfix/vars/main.yml</h3>
<p>Here you can configure <a href="https://en.wikipedia.org/wiki/Open_mail_relay">a relay</a>. This is pretty useful
if your IP is on some kind of blacklist (which is typical for most Internet providers). Here you can
set up a non-blacklisted relay server which will process your email and deliver it to the destination.
This isn't a good option when it comes to privacy, but sometimes - the only one you might have.</p>
<h3>roles/nginx/vars/main.yml</h3>
<p>As I mentioned - those scripts are written with security in mind. One of the features is
<a href="https://en.wikipedia.org/wiki/HTTP_Public_Key_Pinning">HPKP</a> enabled in a webserver - so you need provide
a SHA256 sum here of alternate SSL key (the primary will be calculated for you by the scripts).
HPKP is pretty broad topic, but you can <a href="https://scotthelme.co.uk/hpkp-http-public-key-pinning/">start here</a>
if you need more details.</p>
<h3>roles/security/vars/main.yml</h3>
<p>A configuration for all security related data. Currently it's just username, password and public key for
"user" account (as you should never login directly via root).</p>
<p>Also you can set here an email for all security-related reports. This email should live outside of the
server (for example on gmail or any other provider). The reason for this is, that when machine gets compromised
the local emails may be altered or broken. Of course, nothing prevents an attacker to disable this external
reporting as well, but at least you have this one extra layer of protection. It is also a good idea to set up
filtering rules on this external account, to send those messages back to your usual email. Thanks to that, you
will see them without accessing the external, while keeping them backed up there.</p>
<p>The last setting here is <code class="language-text">strong_primes</code>. If you are setting your server on a strong machine (i.e. powerful
dedicated server etc.), you can set it to <code class="language-text">true</code> and call it a day (and skip the rest of this paragraph).
However if you use some weak microcomputer (like Pi), it's better idea to set it to false and create those
primes manually on better machine (like your laptop). Otherwise your ansible deployment can take hours if not days.</p>
<h4>Creating primes manually</h4>
<p>First of all, take look on commands you need to invoke:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">cat</span> roles/*/tasks/main.yml <span class="token operator">|</span> <span class="token function">grep</span> -B1 <span class="token string">'when: security.strong_primes'</span> <span class="token operator">|</span> <span class="token function">grep</span> shell</code></pre></div>
<p>You need to slightly alter them, as they normally invoked on remote environment, and use filepaths typical for there
(i.e. <code class="language-text">/etc/ssh</code>). The simplest solution is to rename <code class="language-text">/etc</code> to <code class="language-text">/tmp</code> and fire them up with this context.
So for example:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> /tmp/ssh /tmp/ssl
ssh-keygen -G /tmp/ssh/moduli.all -b 4096 <span class="token operator">&amp;&amp;</span> ssh-keygen -T /tmp/ssh/moduli.safe -f /tmp/ssh/moduli.all <span class="token operator">&amp;&amp;</span> <span class="token function">mv</span> /tmp/ssh/moduli.safe /tmp/ssh/moduli <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> /tmp/ssh/moduli.all
<span class="token function">rm</span> /tmp/ssh/ssh_host_*key* <span class="token operator">&amp;&amp;</span> ssh-keygen -t ed25519 -f /tmp/ssh/ssh_host_ed25519_key <span class="token operator">&lt;</span> /dev/null <span class="token operator">&amp;&amp;</span> ssh-keygen -t rsa -b 4096 -f /tmp/ssh/ssh_host_rsa_key <span class="token operator">&lt;</span> /dev/null <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> 600 /tmp/ssh/ssh_host_*key"
openssl dhparam -out /tmp/ssl/dhparams.pem 4096</code></pre></div>
<p>After some time, you will end up with <code class="language-text">/tmp/ssh</code> and <code class="language-text">/tmp/ssl</code> directories with proper keys. Just copy
them to the corresponding <code class="language-text">/etc</code> directories on the server and you're set.</p>
<h3>SSL keys</h3>
<p>Since all communication would (and should) be handled via SSL, you need to create proper certificates.
The easiest solution are <a href="https://www.akadia.com/services/ssh_test_certificate.html">self signed ones</a>,
but I strongly encourage you to use <a href="https://www.startssl.com/">StartSSL</a> or
<a href="https://letsencrypt.org/">Let's Encrypt</a> and issue yourself a valid, properly recognized certificate.</p>
<p>After you do this, it's pretty strightforward - put the private key to <code class="language-text">roles/ssl/templates/private-this-machine.pem</code>
and the certificate chain to <code class="language-text">roles/ssl/templates/certs-this-machine.pem</code>.</p>
<h3>roles/ddclient/templates/ddclient.conf.j2</h3>
<p><a href="https://sourceforge.net/p/ddclient/wiki/Home/">ddclient</a> is a nice Perl script used to update dynamic DNS
entries for accounts on Dynamic DNS Network Service Provider. Thanks to it, if you have a dynamic IP
you can assign a domain to it, and keep it in sync any time when your IP changes. It supports
many providers, and I also included a Cloudflare patch. The template itself is pretty explanatory, but you
can also refer to the <a href="https://sourceforge.net/p/ddclient/wiki/Home/#configuration">ddclient documentation</a>.
If you don't want to use this feature (or have a Static IP), just remove <code class="language-text">ddclient</code> from the main <code class="language-text">main.yml</code> file.</p>
<h2>Deploy</h2>
<p>Phew! After all this configuration, you are ready to deploy. First, you need to set an
<a href="https://docs.ansible.com/ansible/intro_inventory.html">Ansible Inventory</a> files. Since we set our public
key as authorized on the remote host, all we have to put in this file is:</p>
<div class="gatsby-highlight" data-language="ini"><pre class="language-ini"><code class="language-ini"><span class="token selector">[local]</span>
1.2.3.4 ansible_ssh_user<span class="token attr-value"><span class="token punctuation">=</span>root</span></code></pre></div>
<p>where <code class="language-text">1.2.3.4</code> is remote IP of your machine obviously. And then, we can fire it up!</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">ansible-playbook -s -i ansible-inventory main.yml</code></pre></div>
<p>Hopefully everything go well, and you will end up with your self-hosted, automated cloud.</p>
<h3>Post-deploy</h3>
<p>We still have one thing to do - install gpg and import our keys, to make duplicity actually work. So put your
private and public key on the server, and invoke (on remote):</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">apt-get</span> <span class="token function">install</span> gnupg
gpg --import raspberry.public
gpg --allow-secret-key-import --import raspberry.private
gpg --list-keys --fingerprint --with-colons <span class="token operator">|</span> <span class="token function">sed</span> -E -n -e <span class="token string">'s/^fpr:::::::::([0-9A-F]+):$/\1:6:/p'</span> <span class="token operator">|</span> gpg --import-ownertrust</code></pre></div>
<h2>Conclusion</h2>
<p>Well, that was a lot of configuration. Thankfully, you have to do this only once. After that, just archive all those files,
encrypt and store them somewhere safe. If you ever need to redo those steps again, almost everything would be ready and
prepared, and firing up a new instance will be as simple as typing a few commands.</p></div><div id="disqus_thread"></div></div></div></section></div></div></div><section class="jss207" id="contact" aria-label="Contact"></section></div></div><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f">
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-65616575-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-65616575-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      }
      </script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/build-your-own-cloud-fast-thanks-to-ansible-and-automation/";window.webpackCompilationHash="60744ab6bf930c35e421";/*]]>*/</script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5b11c92d460ffea1a563.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-7ee7ec14e054a21de387.js"],"component---src-pages-404-js":["/component---src-pages-404-js-ca1f888553ebe9013971.js"],"component---src-pages-avatar-js":["/component---src-pages-avatar-js-459c30de16ee0eeb2478.js"],"component---src-pages-index-js":["/component---src-pages-index-js-88f50cbe3d6127e8ebfd.js"]};/*]]>*/</script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/webpack-runtime-9c15ed4c69f26eab6acc.js" integrity="sha512-8TQzgTsijPhunOD3heZ5WfI9rSt/ZuOTooEGK+w6KlfIskwTNT/i/e5XDdllwHDLHAnQNgkNkpHdYT4L+pbhjg==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/0-e2a5c9c175a41c0dceee.js" integrity="sha512-K5rVAKXEltfCo5uKyCkj4D5jGBXEhMJ4Fs3EsKTqMxx8Ax+hKhqjV+L2mpbaMmEnNnIy37p0Ju0BAbKB4m7jMg==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/2-2988e124b4c94e635f1f.js" integrity="sha512-VnZS6dhpCDKRXZfgqA5oBukre1wyJ1WmkHjD1JEiPVFglOnHo8Q5boH3lliG822RJXHroAuAglvCfOwJdjn8Jg==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/3-b46058bb17556d147fd2.js" integrity="sha512-CZA896AoQNBUQAAWKyGmqpDA8tAMcfSS9xskfd4xpGTQY1W0uL98PXzhNbM5aquPszllYOYrtsenFwTjF6XTOQ==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/styles-673077b702f15e1f3b87.js" integrity="sha512-+R+8GHdm1yPPlro/552drDxb7Hd0SPWiMP6YE7BjOmrYcZQIRyWVKgD2Byss8EmIXhvv62hS32NqTkc3ef/aaA==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/app-5b11c92d460ffea1a563.js" integrity="sha512-toAduo2798xrXP2Dg7w1wRqeCGhTBWHDt+nfb63SkbykJLQ2Izf+fDfSq/i9BsEiTIOlk7X+NTCJtXO9DtnSWw==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/component---src-templates-blog-post-js-7ee7ec14e054a21de387.js" integrity="sha512-UhlH1A8XTm2VTr8BfNe88xLUd35WR2b+452VrYrtyGwT+j34mMt1HgFoLxZflBWrC+dSeeJLwfllm06pEcbs7A==" async=""></script></body></html>