<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style nonce="9c737cda9c0353592e70a2213073d715bb26b45f" data-href="/styles.984ba98a3f7182cebdba.css" integrity="sha512-tArCtNMISXZKibEa+z5HcGO/B89vsvVbd+cepQbLGYG7ZouyFdTv0t38C7jGJjhZc4x1QhK30ejtIcDAs6Kamg==">@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:100;src:local("Roboto Thin "),local("Roboto-Thin"),url(/static/roboto-latin-100-987b84570ea69ee660455b8d5e91f5f1.woff2) format("woff2"),url(/static/roboto-latin-100-e9dbbe8a693dd275c16d32feb101f1c1.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:100;src:local("Roboto Thin italic"),local("Roboto-Thinitalic"),url(/static/roboto-latin-100italic-6232f43d15b0e7a0bf0fe82e295bdd06.woff2) format("woff2"),url(/static/roboto-latin-100italic-d704bb3d579b7d5e40880c75705c8a71.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:300;src:local("Roboto Light "),local("Roboto-Light"),url(/static/roboto-latin-300-55536c8e9e9a532651e3cf374f290ea3.woff2) format("woff2"),url(/static/roboto-latin-300-a1471d1d6431c893582a5f6a250db3f9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:300;src:local("Roboto Light italic"),local("Roboto-Lightitalic"),url(/static/roboto-latin-300italic-d69924b98acd849cdeba9fbff3f88ea6.woff2) format("woff2"),url(/static/roboto-latin-300italic-210a7c781f5a354a0e4985656ab456d9.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:local("Roboto Regular "),local("Roboto-Regular"),url(/static/roboto-latin-400-5d4aeb4e5f5ef754e307d7ffaef688bd.woff2) format("woff2"),url(/static/roboto-latin-400-bafb105baeb22d965c70fe52ba6b49d9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:400;src:local("Roboto Regular italic"),local("Roboto-Regularitalic"),url(/static/roboto-latin-400italic-d8bcbe724fd6f4ba44d0ee6a2675890f.woff2) format("woff2"),url(/static/roboto-latin-400italic-9680d5a0c32d2fd084e07bbc4c8b2923.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:500;src:local("Roboto Medium "),local("Roboto-Medium"),url(/static/roboto-latin-500-285467176f7fe6bb6a9c6873b3dad2cc.woff2) format("woff2"),url(/static/roboto-latin-500-de8b7431b74642e830af4d4f4b513ec9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:500;src:local("Roboto Medium italic"),local("Roboto-Mediumitalic"),url(/static/roboto-latin-500italic-510dec37fa69fba39593e01a469ee018.woff2) format("woff2"),url(/static/roboto-latin-500italic-ffcc050b2d92d4b14a4fcb527ee0bcc8.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:700;src:local("Roboto Bold "),local("Roboto-Bold"),url(/static/roboto-latin-700-037d830416495def72b7881024c14b7b.woff2) format("woff2"),url(/static/roboto-latin-700-cf6613d1adf490972c557a8e318e0868.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:700;src:local("Roboto Bold italic"),local("Roboto-Bolditalic"),url(/static/roboto-latin-700italic-010c1aeee3c6d1cbb1d5761d80353823.woff2) format("woff2"),url(/static/roboto-latin-700italic-846d1890aee87fde5d8ced8eba360c3a.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:900;src:local("Roboto Black "),local("Roboto-Black"),url(/static/roboto-latin-900-19b7a0adfdd4f808b53af7e2ce2ad4e5.woff2) format("woff2"),url(/static/roboto-latin-900-8c2ade503b34e31430d6c98aa29a52a3.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:900;src:local("Roboto Black italic"),local("Roboto-Blackitalic"),url(/static/roboto-latin-900italic-7b770d6c53423deb1a8e49d3c9175184.woff2) format("woff2"),url(/static/roboto-latin-900italic-bc833e725c137257c2c42a789845d82f.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.PageNotFoundLayout-module--page404html--laTCh{width:100%;height:100%;margin:0;padding:0}.PageNotFoundLayout-module--page404--3vtu0{width:100%;height:100%;margin:0;padding:0;font-family:Open Sans,Helvetica,Arial,sans-serif;color:#5a595a;background:bottom no-repeat #e9ecf7;background-image:url(/static/PageNotFoundLayout-dbca6b21e2eb3b4192d6fad4abe1c8c4.png);background-size:100% auto;position:relative}.PageNotFoundLayout-module--page404--3vtu0 a{text-decoration:none;cursor:pointer;color:#1472b9}.PageNotFoundLayout-module--page404--3vtu0 h1{font-weight:400}.PageNotFoundLayout-module--page404--3vtu0 .PageNotFoundLayout-module--info--2GcMt{position:absolute;right:10%;top:30%;text-align:center;text-shadow:1px 1px 4px #fff}</style><meta name="generator" content="Gatsby 2.13.67"/><style nonce="9c737cda9c0353592e70a2213073d715bb26b45f" type="text/css" id="server-side-jss">html{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,*::before,*::after{box-sizing:inherit}body{margin:0;background-color:#fafafa}@media print{body{background-color:#fff}}html{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,*::before,*::after{box-sizing:inherit}body{margin:0;background-color:#fafafa}@media print{body{background-color:#fff}}.jss109{background-color:#fff}.jss110{border-radius:4px}.jss111{box-shadow:none}.jss112{box-shadow:0 1px 3px 0 rgba(0,0,0,0.2),0 1px 1px 0 rgba(0,0,0,0.14),0 2px 1px -1px rgba(0,0,0,0.12)}.jss113{box-shadow:0 1px 5px 0 rgba(0,0,0,0.2),0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12)}.jss114{box-shadow:0 1px 8px 0 rgba(0,0,0,0.2),0 3px 4px 0 rgba(0,0,0,0.14),0 3px 3px -2px rgba(0,0,0,0.12)}.jss115{box-shadow:0 2px 4px -1px rgba(0,0,0,0.2),0 4px 5px 0 rgba(0,0,0,0.14),0 1px 10px 0 rgba(0,0,0,0.12)}.jss116{box-shadow:0 3px 5px -1px rgba(0,0,0,0.2),0 5px 8px 0 rgba(0,0,0,0.14),0 1px 14px 0 rgba(0,0,0,0.12)}.jss117{box-shadow:0 3px 5px -1px rgba(0,0,0,0.2),0 6px 10px 0 rgba(0,0,0,0.14),0 1px 18px 0 rgba(0,0,0,0.12)}.jss118{box-shadow:0 4px 5px -2px rgba(0,0,0,0.2),0 7px 10px 1px rgba(0,0,0,0.14),0 2px 16px 1px rgba(0,0,0,0.12)}.jss119{box-shadow:0 5px 5px -3px rgba(0,0,0,0.2),0 8px 10px 1px rgba(0,0,0,0.14),0 3px 14px 2px rgba(0,0,0,0.12)}.jss120{box-shadow:0 5px 6px -3px rgba(0,0,0,0.2),0 9px 12px 1px rgba(0,0,0,0.14),0 3px 16px 2px rgba(0,0,0,0.12)}.jss121{box-shadow:0 6px 6px -3px rgba(0,0,0,0.2),0 10px 14px 1px rgba(0,0,0,0.14),0 4px 18px 3px rgba(0,0,0,0.12)}.jss122{box-shadow:0 6px 7px -4px rgba(0,0,0,0.2),0 11px 15px 1px rgba(0,0,0,0.14),0 4px 20px 3px rgba(0,0,0,0.12)}.jss123{box-shadow:0 7px 8px -4px rgba(0,0,0,0.2),0 12px 17px 2px rgba(0,0,0,0.14),0 5px 22px 4px rgba(0,0,0,0.12)}.jss124{box-shadow:0 7px 8px -4px rgba(0,0,0,0.2),0 13px 19px 2px rgba(0,0,0,0.14),0 5px 24px 4px rgba(0,0,0,0.12)}.jss125{box-shadow:0 7px 9px -4px rgba(0,0,0,0.2),0 14px 21px 2px rgba(0,0,0,0.14),0 5px 26px 4px rgba(0,0,0,0.12)}.jss126{box-shadow:0 8px 9px -5px rgba(0,0,0,0.2),0 15px 22px 2px rgba(0,0,0,0.14),0 6px 28px 5px rgba(0,0,0,0.12)}.jss127{box-shadow:0 8px 10px -5px rgba(0,0,0,0.2),0 16px 24px 2px rgba(0,0,0,0.14),0 6px 30px 5px rgba(0,0,0,0.12)}.jss128{box-shadow:0 8px 11px -5px rgba(0,0,0,0.2),0 17px 26px 2px rgba(0,0,0,0.14),0 6px 32px 5px rgba(0,0,0,0.12)}.jss129{box-shadow:0 9px 11px -5px rgba(0,0,0,0.2),0 18px 28px 2px rgba(0,0,0,0.14),0 7px 34px 6px rgba(0,0,0,0.12)}.jss130{box-shadow:0 9px 12px -6px rgba(0,0,0,0.2),0 19px 29px 2px rgba(0,0,0,0.14),0 7px 36px 6px rgba(0,0,0,0.12)}.jss131{box-shadow:0 10px 13px -6px rgba(0,0,0,0.2),0 20px 31px 3px rgba(0,0,0,0.14),0 8px 38px 7px rgba(0,0,0,0.12)}.jss132{box-shadow:0 10px 13px -6px rgba(0,0,0,0.2),0 21px 33px 3px rgba(0,0,0,0.14),0 8px 40px 7px rgba(0,0,0,0.12)}.jss133{box-shadow:0 10px 14px -6px rgba(0,0,0,0.2),0 22px 35px 3px rgba(0,0,0,0.14),0 8px 42px 7px rgba(0,0,0,0.12)}.jss134{box-shadow:0 11px 14px -7px rgba(0,0,0,0.2),0 23px 36px 3px rgba(0,0,0,0.14),0 9px 44px 8px rgba(0,0,0,0.12)}.jss135{box-shadow:0 11px 15px -7px rgba(0,0,0,0.2),0 24px 38px 3px rgba(0,0,0,0.14),0 9px 46px 8px rgba(0,0,0,0.12)}.jss108{overflow:hidden}.jss206{padding:16px}.jss206:last-child{padding-bottom:24px}.jss145{margin:0;display:block}.jss146{color:rgba(0,0,0,0.54);font-size:7rem;font-weight:300;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.14286em;margin-left:-.04em;letter-spacing:-.04em}.jss147{color:rgba(0,0,0,0.54);font-size:3.5rem;font-weight:400;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.30357em;margin-left:-.02em;letter-spacing:-.02em}.jss148{color:rgba(0,0,0,0.54);font-size:2.8125rem;font-weight:400;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.13333em;margin-left:-.02em}.jss149{color:rgba(0,0,0,0.54);font-size:2.125rem;font-weight:400;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.20588em}.jss150{color:rgba(0,0,0,0.87);font-size:1.5rem;font-weight:400;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.35417em}.jss151{color:rgba(0,0,0,0.87);font-size:1.3125rem;font-weight:500;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.16667em}.jss152{color:rgba(0,0,0,0.87);font-size:1rem;font-weight:400;font-family:"Roboto","Helvetica","Arial",sans-serif;line-height:1.5em}.jss153{color:rgba(0,0,0,0.87);font-size:.875rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.5;letter-spacing:.01071em}.jss154{color:rgba(0,0,0,0.87);font-size:1rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.5;letter-spacing:.00938em}.jss155{color:rgba(0,0,0,0.87);font-size:.75rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.66;letter-spacing:.03333em}.jss156{color:rgba(0,0,0,0.87);font-size:.875rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;line-height:1.75;letter-spacing:.02857em;text-transform:uppercase}.jss157{color:#333;font-size:6rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:300;line-height:1;letter-spacing:-0.01562em}.jss158{color:#333;font-size:3.75rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:300;line-height:1;letter-spacing:-0.00833em}.jss159{color:#333;font-size:3rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.04;letter-spacing:0}.jss160{color:#333;font-size:2.125rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.17;letter-spacing:.00735em}.jss161{color:#333;font-size:1.5rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.33;letter-spacing:0}.jss162{color:#333;font-size:1.25rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;line-height:1.6;letter-spacing:.0075em}.jss163{color:#333;font-size:1rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:1.75;letter-spacing:.00938em}.jss164{color:rgba(0,0,0,0.87);font-size:.875rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;line-height:1.57;letter-spacing:.00714em}.jss165{color:rgba(0,0,0,0.87);font-size:.75rem;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;line-height:2.66;letter-spacing:.08333em;text-transform:uppercase}.jss166{width:1px;height:1px;position:absolute;overflow:hidden}.jss167{text-align:left}.jss168{text-align:center}.jss169{text-align:right}.jss170{text-align:justify}.jss171{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.jss172{margin-bottom:.35em}.jss173{margin-bottom:16px}.jss174{color:inherit}.jss175{color:#fafafa}.jss176{color:#f50057}.jss177{color:rgba(0,0,0,0.87)}.jss178{color:rgba(0,0,0,0.54)}.jss179{color:#f44336}.jss180{display:inline}.jss139{display:flex;padding:16px;align-items:center}.jss140{flex:0 0 auto;margin-right:16px}.jss141{flex:0 0 auto;align-self:flex-start;margin-top:-8px;margin-right:-8px}.jss142{flex:1 1 auto}.jss204{display:block;background-size:cover;background-repeat:no-repeat;background-position:center}.jss205{width:100%}.jss188{color:inherit;border:0;margin:0;cursor:pointer;display:inline-flex;outline:0;padding:0;position:relative;align-items:center;user-select:none;border-radius:0;vertical-align:middle;justify-content:center;-moz-appearance:none;text-decoration:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.jss188::-moz-focus-inner{border-style:none}.jss188.jss189{cursor:default;pointer-events:none}.jss182{flex:0 0 auto;color:rgba(0,0,0,0.54);padding:12px;overflow:visible;font-size:1.5rem;text-align:center;transition:background-color 150ms cubic-bezier(0.4,0,0.2,1) 0ms;border-radius:50%}.jss182:hover{background-color:rgba(0,0,0,0.08)}.jss182.jss186{color:rgba(0,0,0,0.26)}@media(hover:none){.jss182:hover{background-color:transparent}}.jss182:hover.jss186{background-color:transparent}.jss183{color:inherit}.jss184{color:#fafafa}.jss184:hover{background-color:rgba(250,250,250,0.08)}@media(hover:none){.jss184:hover{background-color:transparent}}.jss185{color:#f50057}.jss185:hover{background-color:rgba(245,0,87,0.08)}@media(hover:none){.jss185:hover{background-color:transparent}}.jss187{width:100%;display:flex;align-items:inherit;justify-content:inherit}.jss202{top:0;left:0;right:0;bottom:0;z-index:1300;position:fixed}.jss203{visibility:hidden}.jss201{outline:0;position:absolute;min-width:16px;max-width:calc(100% - 32px);overflow-y:auto;overflow-x:hidden;min-height:16px;max-height:calc(100% - 32px)}.jss200{max-height:calc(100% - 96px);-webkit-overflow-scrolling:touch}.jss191{fill:currentColor;width:1em;height:1em;display:inline-block;font-size:24px;transition:fill 200ms cubic-bezier(0.4,0,0.2,1) 0ms;user-select:none;flex-shrink:0}.jss192{color:#fafafa}.jss193{color:#f50057}.jss194{color:rgba(0,0,0,0.54)}.jss195{color:#f44336}.jss196{color:rgba(0,0,0,0.26)}.jss197{font-size:inherit}.jss198{font-size:20px}.jss199{font-size:35px}.jss181{color:inherit;text-decoration:none}.jss136{max-height:200px}.jss137{max-height:450px}.jss138{font-size:3.5rem;font-weight:500}.jss106{box-shadow:none;margin-bottom:2.5em}@media(max-width:959.95px){.jss106{margin-bottom:0}}.jss107 p,.jss107 li{font-size:1.125rem;line-height:1.46429em}.jss7{width:100%;display:flex;flex-wrap:wrap;box-sizing:border-box}.jss8{margin:0;box-sizing:border-box}.jss9{min-width:0}.jss10{flex-direction:column}.jss11{flex-direction:column-reverse}.jss12{flex-direction:row-reverse}.jss13{flex-wrap:nowrap}.jss14{flex-wrap:wrap-reverse}.jss15{align-items:center}.jss16{align-items:flex-start}.jss17{align-items:flex-end}.jss18{align-items:baseline}.jss19{align-content:center}.jss20{align-content:flex-start}.jss21{align-content:flex-end}.jss22{align-content:space-between}.jss23{align-content:space-around}.jss24{justify-content:center}.jss25{justify-content:flex-end}.jss26{justify-content:space-between}.jss27{justify-content:space-around}.jss28{justify-content:space-evenly}.jss29{width:calc(100% + 8px);margin:-4px}.jss29>.jss8{padding:4px}.jss30{width:calc(100% + 16px);margin:-8px}.jss30>.jss8{padding:8px}.jss31{width:calc(100% + 24px);margin:-12px}.jss31>.jss8{padding:12px}.jss32{width:calc(100% + 32px);margin:-16px}.jss32>.jss8{padding:16px}.jss33{width:calc(100% + 40px);margin:-20px}.jss33>.jss8{padding:20px}.jss34{flex-grow:0;max-width:none;flex-basis:auto}.jss35{flex-grow:1;max-width:100%;flex-basis:0}.jss36{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.jss37{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.jss38{flex-grow:0;max-width:25%;flex-basis:25%}.jss39{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.jss40{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.jss41{flex-grow:0;max-width:50%;flex-basis:50%}.jss42{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.jss43{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.jss44{flex-grow:0;max-width:75%;flex-basis:75%}.jss45{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.jss46{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.jss47{flex-grow:0;max-width:100%;flex-basis:100%}@media(min-width:600px){.jss48{flex-grow:0;max-width:none;flex-basis:auto}.jss49{flex-grow:1;max-width:100%;flex-basis:0}.jss50{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.jss51{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.jss52{flex-grow:0;max-width:25%;flex-basis:25%}.jss53{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.jss54{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.jss55{flex-grow:0;max-width:50%;flex-basis:50%}.jss56{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.jss57{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.jss58{flex-grow:0;max-width:75%;flex-basis:75%}.jss59{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.jss60{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.jss61{flex-grow:0;max-width:100%;flex-basis:100%}}@media(min-width:960px){.jss62{flex-grow:0;max-width:none;flex-basis:auto}.jss63{flex-grow:1;max-width:100%;flex-basis:0}.jss64{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.jss65{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.jss66{flex-grow:0;max-width:25%;flex-basis:25%}.jss67{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.jss68{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.jss69{flex-grow:0;max-width:50%;flex-basis:50%}.jss70{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.jss71{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.jss72{flex-grow:0;max-width:75%;flex-basis:75%}.jss73{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.jss74{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.jss75{flex-grow:0;max-width:100%;flex-basis:100%}}@media(min-width:1280px){.jss76{flex-grow:0;max-width:none;flex-basis:auto}.jss77{flex-grow:1;max-width:100%;flex-basis:0}.jss78{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.jss79{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.jss80{flex-grow:0;max-width:25%;flex-basis:25%}.jss81{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.jss82{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.jss83{flex-grow:0;max-width:50%;flex-basis:50%}.jss84{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.jss85{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.jss86{flex-grow:0;max-width:75%;flex-basis:75%}.jss87{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.jss88{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.jss89{flex-grow:0;max-width:100%;flex-basis:100%}}@media(min-width:1920px){.jss90{flex-grow:0;max-width:none;flex-basis:auto}.jss91{flex-grow:1;max-width:100%;flex-basis:0}.jss92{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.jss93{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.jss94{flex-grow:0;max-width:25%;flex-basis:25%}.jss95{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.jss96{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.jss97{flex-grow:0;max-width:50%;flex-basis:50%}.jss98{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.jss99{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.jss100{flex-grow:0;max-width:75%;flex-basis:75%}.jss101{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.jss102{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.jss103{flex-grow:0;max-width:100%;flex-basis:100%}}.jss4{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right)}.jss4 a{color:#b3003d;text-decoration:none}.jss5{display:flex;margin-top:2.5rem;justify-content:center}.jss6{overflow:hidden;max-width:1000px}.jss2{top:0;left:0;width:100%;height:100%;z-index:-1;overflow:hidden;position:absolute;pointer-events:none;background-color:#fff}@media(max-width:599.95px){.jss2{top:-40vh}}.jss3{top:0;left:50%;width:100%;height:3000px;z-index:1;position:absolute;min-width:1920px;transform:translate3d(-50%,0,0);will-change:transform;pointer-events:none;background-color:#fff}.jss207{background:#ffc400;text-align:center}@media(max-width:599.95px){.jss207{margin-top:3rem}}@media(max-width:1279.95px){.jss207{padding:7.5rem 5px;margin-top:15rem}}@media(min-width:960px){.jss207{margin:40vh 0 0;height:60vh;display:flex;min-height:250px;align-items:center;justify-content:center}}.jss208{font-weight:bold;margin-bottom:20px}.jss208 a{color:#333}.jss208 a:hover{text-decoration:underline}@media(max-width:599.95px){.jss104{margin-top:5rem}}@media(min-width:600px){.jss104{margin-top:15rem}}@media(min-width:960px){.jss104{height:100vh;margin:0;padding:0 5px;display:flex;min-height:600px;flex-direction:column;justify-content:center}}@media(max-width:959.95px){.jss104{padding:5rem 5px 0}}.jss105{font-weight:bold;margin-bottom:20px}.jss1{height:auto;display:block;margin-top:0}@media(min-width:960px){.jss1{padding:5rem 0 0}}@media(max-width:959.95px){.jss1{padding:0}}</style><title data-react-helmet="true">Adding a little bit of SpamAssassin into Postfix, Dovecot, Sieve soup | Igor Rzegocki personal webpage and blog</title><link data-react-helmet="true" rel="shortcut icon" type="image/png" href="/static/favicon-9bbd101a3039c60b0eff2f552a2db6bf.png"/><link data-react-helmet="true" rel="canonical" href="https:/www.rzegocki.pl/blog/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup/"/><meta data-react-helmet="true" name="msapplication-config" content="/static/browserconfig-09e19ac7a78d68293c22953898762a5f.xml"/><meta data-react-helmet="true" name="description" content="I was always prefering &quot;stay in the shadows&quot; policy in terms of email address.
I have two secondary emails (for spam I want to read, and for…"/><meta data-react-helmet="true" name="image" content="https://www.rzegocki.pl/static/54d64aef10c4988191b996a934c3cb4d/2f7e7/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg"/><meta data-react-helmet="true" property="og:url" content="https:/www.rzegocki.pl/blog/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Adding a little bit of SpamAssassin into Postfix, Dovecot, Sieve soup"/><meta data-react-helmet="true" property="og:description" content="I was always prefering &quot;stay in the shadows&quot; policy in terms of email address.
I have two secondary emails (for spam I want to read, and for…"/><meta data-react-helmet="true" property="og:image" content="https://www.rzegocki.pl/static/54d64aef10c4988191b996a934c3cb4d/2f7e7/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="ajgon"/><meta data-react-helmet="true" name="twitter:title" content="Adding a little bit of SpamAssassin into Postfix, Dovecot, Sieve soup"/><meta data-react-helmet="true" name="twitter:description" content="I was always prefering &quot;stay in the shadows&quot; policy in terms of email address.
I have two secondary emails (for spam I want to read, and for…"/><meta data-react-helmet="true" name="twitter:image" content="https://www.rzegocki.pl/static/54d64aef10c4988191b996a934c3cb4d/2f7e7/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg"/><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https:/www.rzegocki.pl/","name":"Adding a little bit of SpamAssassin into Postfix, Dovecot, Sieve soup","alternateName":"Igor Rzegocki personal webpage and blog"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:/www.rzegocki.pl/","name":"Blog","image":"https://www.rzegocki.pl/static/54d64aef10c4988191b996a934c3cb4d/2f7e7/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg"}},{"@type":"ListItem","position":2,"item":{"@id":"https:/www.rzegocki.pl/blog/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup/","name":"Adding a little bit of SpamAssassin into Postfix, Dovecot, Sieve soup","image":"https://www.rzegocki.pl/static/54d64aef10c4988191b996a934c3cb4d/2f7e7/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https:/www.rzegocki.pl/","name":"Adding a little bit of SpamAssassin into Postfix, Dovecot, Sieve soup","alternateName":"Igor Rzegocki personal webpage and blog","headline":"Adding a little bit of SpamAssassin into Postfix, Dovecot, Sieve soup","image":{"@type":"ImageObject","url":"https://www.rzegocki.pl/static/54d64aef10c4988191b996a934c3cb4d/2f7e7/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:/www.rzegocki.pl/"},"publisher":{"@type":"Organization","name":"Igor Rzegocki","logo":{"@type":"ImageObject","url":"https://www.rzegocki.pl//icons/icon-512x512.png"}},"datePublished":"July 21, 2012","dateModified":"July 21, 2012","author":"Igor Rzegocki","description":"I was always prefering \"stay in the shadows\" policy in terms of email address.\nI have two secondary emails (for spam I want to read, and for…"}]</script><style nonce="9c737cda9c0353592e70a2213073d715bb26b45f" data-react-helmet="true" type="text/css">body, #___gatsby { position: relative; font-family: Roboto, sans-serif }</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><style nonce="9c737cda9c0353592e70a2213073d715bb26b45f" type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link rel="shortcut icon" href="/icons/icon-48x48.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#a2cf6e"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="70x70" href="/icons/icon-70x70.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="150x150" href="/icons/icon-150x150.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="310x150" href="/icons/icon-310x150.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="310x310" href="/icons/icon-310x310.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=97770e10ac04ff01849e4c50ace6feed"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=97770e10ac04ff01849e4c50ace6feed"/><link as="script" rel="preload" href="/webpack-runtime-0aff3b188cd74c018956.js"/><link as="script" rel="preload" href="/app-e50cc9b91d3fba0be94b.js"/><link as="script" rel="preload" href="/styles-492c144a7db22f2b9ff5.js"/><link as="script" rel="preload" href="/0-9ca1e78ab62db1b28caf.js"/><link as="script" rel="preload" href="/2-ae2e8f738bacaadc0009.js"/><link as="script" rel="preload" href="/3-2e3112c44d4359a440bf.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-2933c2eca45841599bed.js"/><link as="fetch" rel="preload" href="/page-data/blog/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup/page-data.json" crossorigin="anonymous"/></head><body id="about"><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="jss2"><svg class="jss3" alt="" role="presentation" viewBox="0 0 1920 3000"><path transform="translate(-391.661,1890.007)rotate(-106)scale(1.2)" id="heart-path-3" d="M929.557 11C666.76 11 412.049 272.269 293.37 386.75 168.855 506.864-46 566.84-46 857.333c0 364.706 251.46 920.194 535.82 791.281 194.676-88.254 282.567-153.665 389.972-423.354 83.087-208.625 323.07-296.851 323.07-645.67C1202.862 214.883 1294.034 11 929.557 11z" fill="rgb(255,255,255)" stroke="#dcdcdc"></path><path transform="translate(-369.986,1734.425)rotate(-106)scale(1.2)" id="heart-path-2" d="M819.183 84C603.326 84 394.11 298.645 296.628 392.697 194.353 491.375 17.873 540.649 17.873 779.3c0 299.624 206.546 755.983 440.117 650.075 159.903-72.505 232.096-126.243 320.318-347.805 68.246-171.396 265.365-243.877 265.365-530.448C1043.673 251.499 1118.56 84 819.183 84z" fill="rgb(255,255,255)" stroke="#dcdcdc"></path><path transform="translate(-359.59,1586.12)rotate(-106)scale(1.2)" id="heart-path-1" d="M709.498 158c-171.062 0-336.86 170.013-414.112 244.508-81.05 78.16-220.906 117.187-220.906 306.215 0 237.322 163.682 598.787 348.781 514.902 126.72-57.429 183.931-99.993 253.844-275.484 54.084-135.757 210.296-193.167 210.296-420.15C887.4 290.672 946.747 158 709.498 158z" fill="#bfb9dd"></path></svg></div><div class="jss7 jss24 jss4" role="main"><div class="jss8 jss47 jss72 jss5"><div class="jss6"><section class="jss104 jss1"><div class="jss109 jss112 jss110 jss108 jss106"><div class="jss139"><div class="jss142"><h1 class="jss145 jss161 jss138">Adding a little bit of SpamAssassin into Postfix, Dovecot, Sieve soup</h1><span class="jss145 jss154 jss178 jss144">July 21, 2012</span></div><div class="jss141"><nav aria-labelledby="share-button-undefined"><button class="jss188 jss182" tabindex="0" type="button" aria-label="Share" id="share-button-undefined" aria-haspopup="true"><span class="jss187"><svg class="jss191" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0z"></path><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"></path></svg></span></button></nav></div></div><div class="jss204 jss137 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:75.01970055161544%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABYBAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABhy8rDIP/xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIQESH/2gAIAQEAAQUCrSL4Nn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAAgQv/aAAgBAQAGPwKV/8QAGxABAQEAAgMAAAAAAAAAAAAAAREAMVGBwfH/2gAIAQEAAT8hZSnbzrx6ucqOBSoGV+6Lv//aAAwDAQACAAMAAAAQiC//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPxBH/8QAHhAAAgICAgMAAAAAAAAAAAAAAREAITFBYXGBkfD/2gAIAQEAAT8QUIBXVlEhLlAL1Q/ifUsxG9gnYtmPWyssyM+INBLPM//Z" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/54d64aef10c4988191b996a934c3cb4d/4d406/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg 250w,
/static/54d64aef10c4988191b996a934c3cb4d/32ee9/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg 500w,
/static/54d64aef10c4988191b996a934c3cb4d/2f7e7/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg 1000w,
/static/54d64aef10c4988191b996a934c3cb4d/543ca/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg 1269w" sizes="(max-width: 1000px) 100vw, 1000px" /><img loading="lazy" sizes="(max-width: 1000px) 100vw, 1000px" srcset="/static/54d64aef10c4988191b996a934c3cb4d/4d406/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg 250w,
/static/54d64aef10c4988191b996a934c3cb4d/32ee9/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg 500w,
/static/54d64aef10c4988191b996a934c3cb4d/2f7e7/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg 1000w,
/static/54d64aef10c4988191b996a934c3cb4d/543ca/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg 1269w" src="/static/54d64aef10c4988191b996a934c3cb4d/2f7e7/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="jss206"><div class="jss107"><p>I was always prefering "stay in the shadows" policy in terms of email address.
I have two secondary emails (for spam I want to read, and for spam I want to be
sent into oblivion i.e. for "Register NOW to download this 2KB file" sites). My
primary e-mail was well guarded and given only to living people. Until one
company decided to show it to the whole world by putting it into WHOIS database
for my domain. Before I reacted, it was too late. And my little mail server
needed one more extension.</p>
<!--more-->
<p>I wanted to integrate it somehow with my existing configuration - so, when
message is parsed by spam filter, it needs to be filtered further by sieve.
Thanks to that, I can have full control over spam and even categorize it (yeah,
I'm a picky bastard ;)). Thankfully
<a href="https://spamassassin.apache.org/">SpamAssassin</a> can do this, so I didn't have
to look further. I also decided to inlcude
<a href="https://sourceforge.net/apps/trac/pyzor/">Pyzor</a>,
<a href="https://razor.sourceforge.net/">Razor</a> and
<a href="https://www.dcc-servers.net/dcc/">DCC</a>. No mercy!</p>
<h2>Installing packets</h2>
<p>But first - necessary packets. Thankfully, debian has everything out of box,
except DCC.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">apt-get</span> <span class="token function">install</span> spamc spamassassin pyzor razor</code></pre></div>
<p>Next is DCC, which has to be build manually:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">groupadd</span> dcc
<span class="token function">useradd</span> -g dcc -s /bin/false -d /var/dcc dcc
<span class="token function">wget</span> http://www.dcc-servers.net/dcc/source/dcc-dccproc.tar.Z
<span class="token function">tar</span> xzvf dcc-dccproc.tar.Z
<span class="token builtin class-name">cd</span> dcc-dccproc-1.3.142
./configure --with-uid<span class="token operator">=</span>dcc
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
<span class="token function">chown</span> -R dcc:dcc /var/dcc
<span class="token function">ln</span> -s /var/dcc/libexec/dccifd /usr/local/bin/dccif</code></pre></div>
<h2>Setting up SpamAssassin</h2>
<p>The next step is to configure <code class="language-text">spamd</code> to run as a daemon:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">groupdd spamd
<span class="token function">useradd</span> -g spamd -s /bin/false -d /var/lib/spamassassin spamd
<span class="token function">mkdir</span> -p /var/lib/spamassassin
<span class="token function">chown</span> spamd:spamd /var/lib/spamassassin -R</code></pre></div>
<p><code class="language-text">/etc/default/spamassassin</code></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Spamassassin home</span>
<span class="token assign-left variable">SAHOME</span><span class="token operator">=</span><span class="token string">"/var/lib/spamassassin"</span>

<span class="token comment"># Where imap stores user emails</span>
<span class="token assign-left variable">USERACCOUNTS</span><span class="token operator">=</span><span class="token string">"/home/vmail"</span>

<span class="token comment"># Change to one to enable spamd</span>
<span class="token assign-left variable">ENABLED</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token comment"># Options</span>
<span class="token comment"># See man spamd for possible options. The -d option is automatically added.</span>

<span class="token comment"># SpamAssassin uses a preforking model, so be careful! You need to</span>
<span class="token comment"># make sure --max-children is not set to anything higher than 5,</span>
<span class="token comment"># unless you know what you're doing.</span>
<span class="token comment"># For -A use the IP address of spamc client (probably IP of primary interface)</span>
<span class="token assign-left variable">OPTIONS</span><span class="token operator">=</span><span class="token string">"--create-prefs -x --max-children 3 --username spamd --helper-home-dir <span class="token variable">${SAHOME}</span> -s <span class="token variable">${SAHOME}</span>/spamd.log --virtual-config-dir=<span class="token variable">${USERACCOUNTS}</span>/%l@%d/spamassassin -A 192.168.1.1"</span>

<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span></code></pre></div>
<p>The <code class="language-text">virtual-config-dir</code> allows us to have separate user preferences and bayes
databases for each virtual user. The next thing is to edit
<code class="language-text">/etc/spamassassin/local.cf</code> file:</p>
<p><code class="language-text">/etc/spamassassin/local.cf</code></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token comment"># Save spam messages as a message/rfc822 MIME attachment instead of</span>
<span class="token comment"># modifying the original message (0: off, 2: use text/plain instead)</span>
report_safe <span class="token number">0</span>
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>

use_dcc <span class="token number">1</span>
dcc_path /usr/local/bin/dccproc

use_pyzor <span class="token number">1</span>
pyzor_path /usr/bin/pyzor

use_razor2 <span class="token number">1</span>
razor_config /etc/razor/razor-agent.conf</code></pre></div>
<p>Afterwards, edit <code class="language-text">/etc/spamassassin/v310.pre</code> and check that the DCC, Razor and
Pyzor plugins are enabled (DCC is disabled by default). After that, the only
thing left is to update SA databases and start it:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">sa-update --no-gpg
/etc/init.d/spamassassin start</code></pre></div>
<h2>Setting up postfix transport</h2>
<p>From the postfix side all you have to do is change transport (I suggest to
create a new one - then, when something goes wrong you can easily switch back
to old working configuration) or <code class="language-text">mailbox_command</code>. For transport, the magic
line looks like this:</p>
<p><code class="language-text">/etc/postfix/master.cf</code></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">dovecot-spam   unix  -       n       n       -       -       pipe
    <span class="token assign-left variable">flags</span><span class="token operator">=</span>DRhu <span class="token assign-left variable">user</span><span class="token operator">=</span>vmail:vmail <span class="token assign-left variable">argv</span><span class="token operator">=</span>/usr/bin/spamc -u <span class="token variable">${recipient}</span> -e /usr/lib/dovecot/deliver -d <span class="token variable">${recipient}</span></code></pre></div>
<p>And this is the line I've been looking for. SpamAssassin takes message, pushes
it through his intestines, adds headers, and output is pushed further to
<code class="language-text">deliver</code> command. From that point, it can be taken by Sieve. To make this
work, don't forget to change the transport!</p>
<p><code class="language-text">/etc/postfix/main.cf</code></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">mailbox_transport <span class="token operator">=</span> dovecot-spam</code></pre></div>
<p>Restart postfix:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">/etc/init.d/postfix restart</code></pre></div>
<h2>And finally... Sieve</h2>
<p>After all of that, all you have to do is configure Sieve. For example like that
(<em>Junk</em> is a folder which Thunderbird traditionally uses for spam, you can
change it of course):</p>
<p><code class="language-text">.dovecot.sieve</code></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token keyword">if</span> header :contains <span class="token string">"X-Spam-Flag"</span> <span class="token punctuation">[</span><span class="token string">"YES"</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> fileinto <span class="token string">"Junk"</span><span class="token punctuation">;</span> stop<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></div>
<p>To test it, just send an email to protected account and look into the headers.
You should see a SpamAssassin magic added there. To test filtering, use
<a href="https://spamassassin.apache.org/gtube/">GTUBE</a> message format - your email
should land in Junk.</p>
<h2>Conclusion</h2>
<p>I think this configuration will suit my needs. Probably it will get some
adjustments over time (like intelligent filters in SA and so on), and - when I
start to trust it fully - instead of moving into the Junk all spam will be
deleted. But for now, everything works like a charm :) If you experience any
problems, first look into <code class="language-text">/var/lib/spamassassin/spamd.log</code> file - there is big
chance, that you'll find your answers there.</p>
<h3>Sources</h3>
<ul>
<li><a href="https://ailoo.net/2009/11/integrate-spamassassin-into-postfix-dovecot/">https://ailoo.net/2009/11/integrate-spamassassin-into-postfix-dovecot/</a></li>
</ul></div><div id="disqus_thread"></div></div></div></section></div></div></div><section class="jss207" id="contact" aria-label="Contact"></section></div></div><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/adding-a-little-bit-of-spamassassin-into-postfix-slash-dovecot-slash-sieve-soup/";window.webpackCompilationHash="e8a272a284c5a6f79873";/*]]>*/</script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-e50cc9b91d3fba0be94b.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-2933c2eca45841599bed.js"],"component---src-pages-404-js":["/component---src-pages-404-js-82db939d0407d7a53db5.js"],"component---src-pages-avatar-js":["/component---src-pages-avatar-js-f08881d5a7af22d568cc.js"],"component---src-pages-index-js":["/component---src-pages-index-js-a109d855aabe63996c42.js"]};/*]]>*/</script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/component---src-templates-blog-post-js-2933c2eca45841599bed.js" integrity="sha512-unDLLR2ACS+MPNqO8GzFbpyqBmaxA65eqI3Q0kyAxKNQvpevbpohunyDBX1qTK5D/gso0k4Hmovf+MNcaK4+RQ==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/3-2e3112c44d4359a440bf.js" integrity="sha512-mToiho8B55JB7J9swjLT7NKpQQpdrOI5HvwsLfUQDp4Q2hQkTYAIWJbyBfhBy2ZNiIdn60qTVisww/EsCMaKmw==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/2-ae2e8f738bacaadc0009.js" integrity="sha512-WR62cd4khE8czv8Ed6SR3SKGbbNZaKHgukRwLWBMPc0ZQsFJfFlw1tFdjoP8lAF/vn99KX2pfyzpMGdUPA7E6w==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/0-9ca1e78ab62db1b28caf.js" integrity="sha512-bJYc4o3vr0Z2PaxBb9tbOK54qMPEQR0h1dqPlRC404OIYAsEN1cZdVro8ttDTaU0Zb75BpZk89D+ZV7I0lQMPg==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/styles-492c144a7db22f2b9ff5.js" integrity="sha512-JiZuxDeQTjDCCD937KtDZhRzjvQl+9bYnxuBb7pPzdKgWdHf3EKTSAEJBkymbrY/A4g6WOUNXqw7aPKXnBi8rQ==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/app-e50cc9b91d3fba0be94b.js" integrity="sha512-KuI+cTyHxLBpI5w5aAnQbhHMMhWft0WNibMvdSUDLVMng5TQS4Omyg5fqmSsSrEg8w2La7UkRH7DD1cGjQQpyw==" async=""></script><script nonce="9c737cda9c0353592e70a2213073d715bb26b45f" src="/webpack-runtime-0aff3b188cd74c018956.js" integrity="sha512-YRnIrtEsGaCNpsDjoWifb7RYS1ErzmrXrgT4P8BgNl7CYhmms0OFRjkybhASigELt5eGmUnJZ2FOR8zruXr2/Q==" async=""></script></body></html>