{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/adding-email-server-autoconfig-and-autodiscover/","result":{"data":{"allFile":{"edges":[{"node":{"publicURL":"/static/09e19ac7a78d68293c22953898762a5f/browserconfig.xml"}}]},"site":{"siteMetadata":{"siteUrl":"https://www.rzegocki.pl"}},"avatar":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAEbUlEQVQ4y21Te1BUZRS/y7KPy+42EJMmpTZTTTX+U9ljnJ40TTk1ZVCWiyIaLAiJoiSKKCJijG4Rg1NAROAklbwMBtwxBdoRMTDiIcsjXjLiroDgAgLr3nu/X9+97i4wdmZ+e853v3N+93fOucsw1BQKBeM2lmU9sUqleoxCT5FPsYHCn1lg9OwlerVaLcaLLhilUsn4+Pi4z+spGmjiLAUWYJTiMkUBvX9pIambYyGpzOUfpbBTpWBZNZRKBVGrVTx9xouk1LvJ/6HxkoWkEqGbmSbIXfJTRTKFt7eDkcnJQ0uWEpb1IVqtlihVKkGr1fEajcbhIjUrFN4ehfepU6vZZWqVapzOFL5+/kJibBjZuyOCBK97H4FvvoG3A18nG9YHkRUrVhK5XO4UX0xrQ90qPQopJHU+rHqTQqnCyy+u5otz0nDjUiGpKTqOC0VGNJRlou4XI6rzU0lyfCRZ+nAA72q/3NWZl6RS/HG3yzCyguWPBMBceoLju8rR01BBnLN2wN4H2JoAYQbXLfWYbC1GdvoeTu6tBKtWlywiFGW6h0ptzdNPrHTMdZSB6/+DADwRAExOTlNMYmb2Lj2BEGsTcXQUC8+uehK05qOFi5FMq/HxxN8kRTZioArcUD0vFjucHEZsw5get2Ls1rhE6LhpETBsQsaBqH5xuW4Oj8LDOzcy6K+W2nZ2V/4A6wU4e6o4YdoGwjsJb22Gc7COtuyEwDnADf7J4fo5TLaVFok1482/3b/pOcsZ6eFkW8lrGDiLu11niLO7gnC9Z4H+SmCgEjyNnf+aCL0TMGjCrKX8HbGG66n0emX1qnmypx5fzgB9zNBfRRKpo6siF7Za0ETe3nKaNFYXoqH6FMaaS8B1/86Ld+OtpRVibkddnhcdA+OlCZgnFASBeTf0PQZWs3Q2xG8pazB9D6qCxzUT/XSM+MmYCNJbBXoWGk3ZMMSHDT239vllYv4nhiDZ3Nwss8hu2IYldVNT9rc6ey1I/fawkJudTNpr8zHafFpC2/k8/Jibgn1fJTgvtzSgu7fzoFhzpbVRmr9Op7tHJkrmeEHuirPFVdZcPM9t3hmKmP3RJC0tAseObsX2xEhsjgsjeUU54hcg2tU70zZvN4fHrDab5GubupT22xMtdJ3IPvkdvy0hnMQdiiWpKVtwJCkEXybH4Iv920iyMYncHr9J7BNjxD4188K9zqa8PAobL5ml//LWkyOq0XZTPwbO4XhGIheZYMC+I9EkMyscX2d8joPpUZQwiqSkx5M77WWY7qnhr/YNS+u91t87Tyi9wVIlzZB+1FFd5kIcSN+NXalxXIoxVsjMiRaycqPJsawYEpeyg+w9usvZUf8zRq4UZUgzrPtVzvyfxe6OkkiDDfo1gWsDp4P0H0If/hk2Rm5CiAiDHiERn+Lj0GB8oF938dVDe7Ri/vakSNnfs5hfyqC5wM0pc/lnWAXbrFFpOn11vm3+fg/2Ukz4+/nb/R7wu6VjdVDJlVU0z6PMUntK8v8Bt8WCTNzAZZUAAAAASUVORK5CYII=","width":192,"height":192,"src":"/static/288480e5b155377d1ae8a338e27da1ef/f20a7/ajgon.png","srcSet":"/static/288480e5b155377d1ae8a338e27da1ef/f20a7/ajgon.png 1x,\n/static/288480e5b155377d1ae8a338e27da1ef/6c7c3/ajgon.png 1.5x,\n/static/288480e5b155377d1ae8a338e27da1ef/6a040/ajgon.png 2x"}}},"allMenuJson":{"edges":[{"node":{"id":"2e6028ce-fad1-487b-bace-6117f33e393f","name":"About","to":"about"}},{"node":{"id":"27dd36a1-f8af-4d43-8bab-c37310058c1e","name":"Technologies","to":"technologies"}},{"node":{"id":"447e8185-ac1a-42bc-a28c-4bc90e52735a","name":"Blog","to":"blog"}},{"node":{"id":"a9fc4afa-7b78-44d2-b015-4dac2ac2afe8","name":"Contact","to":"contact"}}]},"allShareJson":{"edges":[{"node":{"id":"2f0a723b-2772-40bf-9edc-70dd70337f10","slug":"facebook","name":"Facebook","url":"https://www.facebook.com/sharer/sharer.php?u=%POSTURL%;display=popup","width":626,"height":457}},{"node":{"id":"f5678f7f-ae05-444a-af1a-1167a30d0cce","slug":"linkedin","name":"LinkedIn","url":"https://www.linkedin.com/shareArticle?mini=true&amp;url=%POSTURL%&amp;title=","width":600,"height":450}},{"node":{"id":"4cbf0a18-d389-4583-98ac-501e59f1be18","slug":"twitter","name":"Twitter","url":"https://twitter.com/share?url=%POSTURL%&amp;text=","width":500,"height":550}}]},"allSocialJson":{"edges":[{"node":{"id":"587d3ac1-40e9-4cc1-a610-f8cb9657bfbc","name":"GitHub","slug":"github","url":"https://github.com/ajgon"}},{"node":{"id":"d97c572d-7410-413c-89bd-ee620e901fce","name":"LinkedIn","slug":"linkedin","url":"https://www.linkedin.com/in/ajgon"}},{"node":{"id":"6928828d-8198-4387-a5f6-3a1036179c08","name":"Keybase","slug":"keybase","url":"https://keybase.io/ajgon"}}]},"markdownRemark":{"html":"<p>One of the nicest, yet badly documented features in new MUAs is email servers autodiscovering. When you type your e-mail address in configuration window, modern MUA is trying to determine what IMAP/POP3 servers are, and how to connect to them. To do so, they assume, that your email contains a server domain name. A nice assumption, but often not relevant (google apps is a good example here). Thankfully, there is also another way - asking an original server on a specially configured domain what those parameters are.</p>\n<!-- more -->\n<p>In a perfect world, there would one standard for that - in our world however, there are two: <code class=\"language-text\">autoconfig</code> (Mozilla favored) and <code class=\"language-text\">autodiscover</code> (Microsoft promoted). So we have to to set them together - thankfully both are based on simple XML files, so it's not a big deal.</p>\n<h2>autoconfig (Mozilla Thunderbird)</h2>\n<p>This one is (im my opinion) is more clean and advanced. To use it, just make your webserver to return below XML file on <code class=\"language-text\">autoconfig.</code> subdomain. So (for example) if you have email <code class=\"language-text\">myname@mydomain.com</code> - <code class=\"language-text\">autoconfig.mydomain.com</code> should return:</p>\n<p><code class=\"language-text\">autoconfig.xml</code></p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>clientConfig</span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>1.1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>emailProvider</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mydomain.com<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>domain</span><span class=\"token punctuation\">></span></span>mydomain.com<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>domain</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>displayName</span><span class=\"token punctuation\">></span></span>Mail<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>displayName</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>displayShortName</span><span class=\"token punctuation\">></span></span>Mail<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>displayShortName</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>incomingServer</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>pop3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hostname</span><span class=\"token punctuation\">></span></span>mail.mydomain.com<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>hostname</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>port</span><span class=\"token punctuation\">></span></span>995<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>port</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>socketType</span><span class=\"token punctuation\">></span></span>SSL<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>socketType</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>authentication</span><span class=\"token punctuation\">></span></span>password-cleartext<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>authentication</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>username</span><span class=\"token punctuation\">></span></span>%EMAILADDRESS%<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>username</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pop3</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>leaveMessagesOnServer</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>leaveMessagesOnServer</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>downloadOnBiff</span><span class=\"token punctuation\">></span></span>true<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>downloadOnBiff</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>daysToLeaveMessagesOnServer</span><span class=\"token punctuation\">></span></span>10<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>daysToLeaveMessagesOnServer</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pop3</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>incomingServer</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>incomingServer</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>imap<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hostname</span><span class=\"token punctuation\">></span></span>mail.mydomain.com<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>hostname</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>port</span><span class=\"token punctuation\">></span></span>993<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>port</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>socketType</span><span class=\"token punctuation\">></span></span>SSL<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>socketType</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>authentication</span><span class=\"token punctuation\">></span></span>password-cleartext<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>authentication</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>username</span><span class=\"token punctuation\">></span></span>%EMAILADDRESS%<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>username</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>incomingServer</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>outgoingServer</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>smtp<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hostname</span><span class=\"token punctuation\">></span></span>mail.mydomain.com<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>hostname</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>port</span><span class=\"token punctuation\">></span></span>587<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>port</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>socketType</span><span class=\"token punctuation\">></span></span>STARTTLS<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>socketType</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>authentication</span><span class=\"token punctuation\">></span></span>password-cleartext<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>authentication</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>username</span><span class=\"token punctuation\">></span></span>%EMAILADDRESS%<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>username</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>outgoingServer</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>emailProvider</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>clientConfig</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>If you have an email server on a different domain than your email account, simply add redirect to your httpd server. For example in nginx:</p>\n<p><code class=\"language-text\">/etc/nginx.conf</code></p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">server_name</span> autoconfig<span class=\"token punctuation\">.</span>myotherdomain<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">rewrite</span> <span class=\"token operator\">^</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">https</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>mydomain<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>config<span class=\"token operator\">-</span>v1<span class=\"token punctuation\">.</span><span class=\"token number\">1.</span>xml permanent<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And that's it! From now on, your email will be automatically discovered by Thunderbird.</p>\n<h2>autodiscover (Microsoft Outlook)</h2>\n<p>Procedure is very similar here. You just have to set <code class=\"language-text\">autodiscover.</code> domain, and XML file is slightly different. So, for example <code class=\"language-text\">autodiscover.mydomain.com</code> should return:</p>\n<p><code class=\"language-text\">autodiscover.xml</code></p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Autodiscover</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://schemas.microsoft.com/exchange/autodiscover/responseschema/2006<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Response</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://schemas.microsoft.com/exchange/autodiscover/outlook/responseschema/2006a<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Account</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>AccountType</span><span class=\"token punctuation\">></span></span>email<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>AccountType</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Action</span><span class=\"token punctuation\">></span></span>settings<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Action</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Protocol</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Type</span><span class=\"token punctuation\">></span></span>POP3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Server</span><span class=\"token punctuation\">></span></span>mail.mydomain.com<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Server</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Port</span><span class=\"token punctuation\">></span></span>995<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Port</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>DomainRequired</span><span class=\"token punctuation\">></span></span>on<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>DomainRequired</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SPA</span><span class=\"token punctuation\">></span></span>off<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>SPA</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SSL</span><span class=\"token punctuation\">></span></span>on<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>SSL</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>AuthRequired</span><span class=\"token punctuation\">></span></span>on<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>AuthRequired</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Protocol</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Protocol</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Type</span><span class=\"token punctuation\">></span></span>IMAP<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Server</span><span class=\"token punctuation\">></span></span>mail.mydomain.com<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Server</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Port</span><span class=\"token punctuation\">></span></span>993<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Port</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>DomainRequired</span><span class=\"token punctuation\">></span></span>on<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>DomainRequired</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SPA</span><span class=\"token punctuation\">></span></span>off<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>SPA</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SSL</span><span class=\"token punctuation\">></span></span>on<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>SSL</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>AuthRequired</span><span class=\"token punctuation\">></span></span>on<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>AuthRequired</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Protocol</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Protocol</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Type</span><span class=\"token punctuation\">></span></span>SMTP<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Type</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Server</span><span class=\"token punctuation\">></span></span>mail.mydomain.com<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Server</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Port</span><span class=\"token punctuation\">></span></span>587<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Port</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>DomainRequired</span><span class=\"token punctuation\">></span></span>on<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>DomainRequired</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SPA</span><span class=\"token punctuation\">></span></span>off<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>SPA</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SSL</span><span class=\"token punctuation\">></span></span>on<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>SSL</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>AuthRequired</span><span class=\"token punctuation\">></span></span>on<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>AuthRequired</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>UsePOPAuth</span><span class=\"token punctuation\">></span></span>off<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>UsePOPAuth</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SMTPLast</span><span class=\"token punctuation\">></span></span>off<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>SMTPLast</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Protocol</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Account</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Response</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Autodiscover</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>And again, if your email domain differs from server domain, add proper redirect:</p>\n<p><code class=\"language-text\">/etc/nginx.conf</code></p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token keyword\">server</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">server_name</span> autodiscover<span class=\"token punctuation\">.</span>myotherdomain<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">rewrite</span> <span class=\"token operator\">^</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">https</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>mydomain<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>autodiscover<span class=\"token punctuation\">.</span>xml permanent<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And that's it! Enjoy your new, shiny, auto-configuring E-mail!</p>\n<h3>Sources</h3>\n<ul>\n<li><a href=\"bugtracker.ispconfig.org/index.php?do=details&#x26;task_id=2152\">bugtracker.ispconfig.org/index.php?do=details&#x26;task_id=2152</a></li>\n</ul>","excerpt":"One of the nicest, yet badly documented features in new MUAs is email servers autodiscovering. When you type your e-mail address in…","frontmatter":{"id":"60b24bcb-7bd8-4279-bc5b-8f20be330fa7","title":"Adding Email server autoconfig and autodiscover","date":"October 28, 2013","isoDate":"2013-10-28T12:57:00.000Z","tags":["administration"],"cover":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAFHx6S4jLP/xAAbEAACAgMBAAAAAAAAAAAAAAABAgARAwQUEv/aAAgBAQABBQLJtBj1vXW89mM9ClM//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHhAAAgEDBQAAAAAAAAAAAAAAAAERECExIjJBYaH/2gAIAQEABj8C0rHI7KV1k2J0siY9P//EABwQAAICAgMAAAAAAAAAAAAAAAERACExQVFxkf/aAAgBAQABPyEHeyqHdSGFxQ/OICIHRcE/1OIsG3cf/9oADAMBAAIAAwAAABAwz//EABYRAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxCIiP/EABURAQEAAAAAAAAAAAAAAAAAAAAh/9oACAECAQE/EKr/xAAeEAEBAAIBBQEAAAAAAAAAAAABEQAhMUFRYXGB8P/aAAgBAQABPxCDkCpqHAl4uKGTiM+OdfMiFJoWNGpe+DOuwvXx6xWWrQofly0AkgULn//Z","aspectRatio":1.4970059880239521,"src":"/static/0383ba95762ba7c71a8b41fb13e5a5e4/a7715/adding-email-server-autoconfig-and-autodiscover.jpg","srcSet":"/static/0383ba95762ba7c71a8b41fb13e5a5e4/8f7df/adding-email-server-autoconfig-and-autodiscover.jpg 250w,\n/static/0383ba95762ba7c71a8b41fb13e5a5e4/0f3a1/adding-email-server-autoconfig-and-autodiscover.jpg 500w,\n/static/0383ba95762ba7c71a8b41fb13e5a5e4/a7715/adding-email-server-autoconfig-and-autodiscover.jpg 1000w,\n/static/0383ba95762ba7c71a8b41fb13e5a5e4/16310/adding-email-server-autoconfig-and-autodiscover.jpg 1024w","srcWebp":"/static/0383ba95762ba7c71a8b41fb13e5a5e4/e30b5/adding-email-server-autoconfig-and-autodiscover.webp","srcSetWebp":"/static/0383ba95762ba7c71a8b41fb13e5a5e4/7ca0e/adding-email-server-autoconfig-and-autodiscover.webp 250w,\n/static/0383ba95762ba7c71a8b41fb13e5a5e4/e9589/adding-email-server-autoconfig-and-autodiscover.webp 500w,\n/static/0383ba95762ba7c71a8b41fb13e5a5e4/e30b5/adding-email-server-autoconfig-and-autodiscover.webp 1000w,\n/static/0383ba95762ba7c71a8b41fb13e5a5e4/cc834/adding-email-server-autoconfig-and-autodiscover.webp 1024w","sizes":"(max-width: 1000px) 100vw, 1000px"}}},"path":"/blog/adding-email-server-autoconfig-and-autodiscover/","author":"Igor Rzegocki"}}},"pageContext":{}}}